var aa=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Jp=aa((Qp,ra)=>{function ni(e,t){return function(){return e.apply(t,arguments)}}const{toString:ca}=Object.prototype,{getPrototypeOf:gr}=Object,cn=(e=>t=>{const n=ca.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_e=e=>(e=e.toLowerCase(),t=>cn(t)===e),un=e=>t=>typeof t===e,{isArray:rt}=Array,Et=un("undefined");function ua(e){return e!==null&&!Et(e)&&e.constructor!==null&&!Et(e.constructor)&&ce(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ri=_e("ArrayBuffer");function la(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ri(e.buffer),t}const da=un("string"),ce=un("function"),si=un("number"),ln=e=>e!==null&&typeof e=="object",fa=e=>e===!0||e===!1,zt=e=>{if(cn(e)!=="object")return!1;const t=gr(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ha=_e("Date"),pa=_e("File"),ma=_e("Blob"),_a=_e("FileList"),ga=e=>ln(e)&&ce(e.pipe),ya=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ce(e.append)&&((t=cn(e))==="formdata"||t==="object"&&ce(e.toString)&&e.toString()==="[object FormData]"))},Ea=_e("URLSearchParams"),Sa=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function It(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),rt(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(r=0;r<o;r++)a=i[r],t.call(null,e[a],a,e)}}function ii(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const oi=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ai=e=>!Et(e)&&e!==oi;function zn(){const{caseless:e}=ai(this)&&this||{},t={},n=(r,s)=>{const i=e&&ii(t,s)||s;zt(t[i])&&zt(r)?t[i]=zn(t[i],r):zt(r)?t[i]=zn({},r):rt(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&It(arguments[r],n);return t}const ba=(e,t,n,{allOwnKeys:r}={})=>(It(t,(s,i)=>{n&&ce(s)?e[i]=ni(s,n):e[i]=s},{allOwnKeys:r}),e),wa=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),va=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Ta=(e,t,n,r)=>{let s,i,o;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&gr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Ra=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},ka=e=>{if(!e)return null;if(rt(e))return e;let t=e.length;if(!si(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ia=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&gr(Uint8Array)),xa=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Oa=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Ca=_e("HTMLFormElement"),Na=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Kr=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Da=_e("RegExp"),ci=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};It(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(r[i]=o||s)}),Object.defineProperties(e,r)},Ma=e=>{ci(e,(t,n)=>{if(ce(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ce(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Aa=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return rt(e)?r(e):r(String(e).split(t)),n},La=()=>{},Ba=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Dn="abcdefghijklmnopqrstuvwxyz",Jr="0123456789",ui={DIGIT:Jr,ALPHA:Dn,ALPHA_DIGIT:Dn+Dn.toUpperCase()+Jr},Pa=(e=16,t=ui.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Ua(e){return!!(e&&ce(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Fa=e=>{const t=new Array(10),n=(r,s)=>{if(ln(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const i=rt(r)?[]:{};return It(r,(o,a)=>{const c=n(o,s+1);!Et(c)&&(i[a]=c)}),t[s]=void 0,i}}return r};return n(e,0)},Ha=_e("AsyncFunction"),$a=e=>e&&(ln(e)||ce(e))&&ce(e.then)&&ce(e.catch),m={isArray:rt,isArrayBuffer:ri,isBuffer:ua,isFormData:ya,isArrayBufferView:la,isString:da,isNumber:si,isBoolean:fa,isObject:ln,isPlainObject:zt,isUndefined:Et,isDate:ha,isFile:pa,isBlob:ma,isRegExp:Da,isFunction:ce,isStream:ga,isURLSearchParams:Ea,isTypedArray:Ia,isFileList:_a,forEach:It,merge:zn,extend:ba,trim:Sa,stripBOM:wa,inherits:va,toFlatObject:Ta,kindOf:cn,kindOfTest:_e,endsWith:Ra,toArray:ka,forEachEntry:xa,matchAll:Oa,isHTMLForm:Ca,hasOwnProperty:Kr,hasOwnProp:Kr,reduceDescriptors:ci,freezeMethods:Ma,toObjectSet:Aa,toCamelCase:Na,noop:La,toFiniteNumber:Ba,findKey:ii,global:oi,isContextDefined:ai,ALPHABET:ui,generateString:Pa,isSpecCompliantForm:Ua,toJSONObject:Fa,isAsyncFn:Ha,isThenable:$a};function O(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}m.inherits(O,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:m.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const li=O.prototype,di={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{di[e]={value:e}});Object.defineProperties(O,di);Object.defineProperty(li,"isAxiosError",{value:!0});O.from=(e,t,n,r,s,i)=>{const o=Object.create(li);return m.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),O.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const ja=null;function Gn(e){return m.isPlainObject(e)||m.isArray(e)}function fi(e){return m.endsWith(e,"[]")?e.slice(0,-2):e}function Xr(e,t,n){return e?e.concat(t).map(function(s,i){return s=fi(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function za(e){return m.isArray(e)&&!e.some(Gn)}const Ga=m.toFlatObject(m,{},null,function(t){return/^is[A-Z]/.test(t)});function dn(e,t,n){if(!m.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=m.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,g){return!m.isUndefined(g[_])});const r=n.metaTokens,s=n.visitor||l,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&m.isSpecCompliantForm(t);if(!m.isFunction(s))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(m.isDate(h))return h.toISOString();if(!c&&m.isBlob(h))throw new O("Blob is not supported. Use a Buffer instead.");return m.isArrayBuffer(h)||m.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,_,g){let b=h;if(h&&!g&&typeof h=="object"){if(m.endsWith(_,"{}"))_=r?_:_.slice(0,-2),h=JSON.stringify(h);else if(m.isArray(h)&&za(h)||(m.isFileList(h)||m.endsWith(_,"[]"))&&(b=m.toArray(h)))return _=fi(_),b.forEach(function(k,D){!(m.isUndefined(k)||k===null)&&t.append(o===!0?Xr([_],D,i):o===null?_:_+"[]",u(k))}),!1}return Gn(h)?!0:(t.append(Xr(g,_,i),u(h)),!1)}const d=[],f=Object.assign(Ga,{defaultVisitor:l,convertValue:u,isVisitable:Gn});function p(h,_){if(!m.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+_.join("."));d.push(h),m.forEach(h,function(b,w){(!(m.isUndefined(b)||b===null)&&s.call(t,b,m.isString(w)?w.trim():w,_,f))===!0&&p(b,_?_.concat(w):[w])}),d.pop()}}if(!m.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Qr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function yr(e,t){this._pairs=[],e&&dn(e,this,t)}const hi=yr.prototype;hi.append=function(t,n){this._pairs.push([t,n])};hi.toString=function(t){const n=t?function(r){return t.call(this,r,Qr)}:Qr;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Wa(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pi(e,t,n){if(!t)return e;const r=n&&n.encode||Wa,s=n&&n.serialize;let i;if(s?i=s(t,n):i=m.isURLSearchParams(t)?t.toString():new yr(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ya{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){m.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Zr=Ya,mi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qa=typeof URLSearchParams<"u"?URLSearchParams:yr,Va=typeof FormData<"u"?FormData:null,Ka=typeof Blob<"u"?Blob:null,Ja=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Xa=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),pe={isBrowser:!0,classes:{URLSearchParams:qa,FormData:Va,Blob:Ka},isStandardBrowserEnv:Ja,isStandardBrowserWebWorkerEnv:Xa,protocols:["http","https","file","blob","url","data"]};function Qa(e,t){return dn(e,new pe.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return pe.isNode&&m.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Za(e){return m.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ec(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function _i(e){function t(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),c=i>=n.length;return o=!o&&m.isArray(s)?s.length:o,c?(m.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!m.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],i)&&m.isArray(s[o])&&(s[o]=ec(s[o])),!a)}if(m.isFormData(e)&&m.isFunction(e.entries)){const n={};return m.forEachEntry(e,(r,s)=>{t(Za(r),s,n,0)}),n}return null}function tc(e,t,n){if(m.isString(e))try{return(t||JSON.parse)(e),m.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Er={transitional:mi,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=m.isObject(t);if(i&&m.isHTMLForm(t)&&(t=new FormData(t)),m.isFormData(t))return s&&s?JSON.stringify(_i(t)):t;if(m.isArrayBuffer(t)||m.isBuffer(t)||m.isStream(t)||m.isFile(t)||m.isBlob(t))return t;if(m.isArrayBufferView(t))return t.buffer;if(m.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Qa(t,this.formSerializer).toString();if((a=m.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return dn(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),tc(t)):t}],transformResponse:[function(t){const n=this.transitional||Er.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&m.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?O.from(a,O.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pe.classes.FormData,Blob:pe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};m.forEach(["delete","get","head","post","put","patch"],e=>{Er.headers[e]={}});const Sr=Er,nc=m.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rc=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&nc[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},es=Symbol("internals");function dt(e){return e&&String(e).trim().toLowerCase()}function Gt(e){return e===!1||e==null?e:m.isArray(e)?e.map(Gt):String(e)}function sc(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const ic=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Mn(e,t,n,r,s){if(m.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!m.isString(t)){if(m.isString(r))return t.indexOf(r)!==-1;if(m.isRegExp(r))return r.test(t)}}function oc(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function ac(e,t){const n=m.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,o){return this[r].call(this,t,s,i,o)},configurable:!0})})}class fn{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(a,c,u){const l=dt(c);if(!l)throw new Error("header name must be a non-empty string");const d=m.findKey(s,l);(!d||s[d]===void 0||u===!0||u===void 0&&s[d]!==!1)&&(s[d||c]=Gt(a))}const o=(a,c)=>m.forEach(a,(u,l)=>i(u,l,c));return m.isPlainObject(t)||t instanceof this.constructor?o(t,n):m.isString(t)&&(t=t.trim())&&!ic(t)?o(rc(t),n):t!=null&&i(n,t,r),this}get(t,n){if(t=dt(t),t){const r=m.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return sc(s);if(m.isFunction(n))return n.call(this,s,r);if(m.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=dt(t),t){const r=m.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Mn(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(o){if(o=dt(o),o){const a=m.findKey(r,o);a&&(!n||Mn(r,r[a],a,n))&&(delete r[a],s=!0)}}return m.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||Mn(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return m.forEach(this,(s,i)=>{const o=m.findKey(r,i);if(o){n[o]=Gt(s),delete n[i];return}const a=t?oc(i):String(i).trim();a!==i&&delete n[i],n[a]=Gt(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return m.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&m.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[es]=this[es]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=dt(o);r[a]||(ac(s,o),r[a]=!0)}return m.isArray(t)?t.forEach(i):i(t),this}}fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);m.reduceDescriptors(fn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});m.freezeMethods(fn);const be=fn;function An(e,t){const n=this||Sr,r=t||n,s=be.from(r.headers);let i=r.data;return m.forEach(e,function(a){i=a.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function gi(e){return!!(e&&e.__CANCEL__)}function xt(e,t,n){O.call(this,e??"canceled",O.ERR_CANCELED,t,n),this.name="CanceledError"}m.inherits(xt,O,{__CANCEL__:!0});function cc(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new O("Request failed with status code "+n.status,[O.ERR_BAD_REQUEST,O.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const uc=pe.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const c=[];c.push(n+"="+encodeURIComponent(r)),m.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),m.isString(i)&&c.push("path="+i),m.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function lc(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function dc(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function yi(e,t){return e&&!lc(t)?dc(e,t):t}const fc=pe.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=m.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function hc(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function pc(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=r[i];o||(o=u),n[s]=c,r[s]=u;let d=i,f=0;for(;d!==s;)f+=n[d++],d=d%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-o<t)return;const p=l&&u-l;return p?Math.round(f*1e3/p):void 0}}function ts(e,t){let n=0;const r=pc(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,c=r(a),u=i<=o;n=i;const l={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&u?(o-i)/c:void 0,event:s};l[t?"download":"upload"]=!0,e(l)}}const mc=typeof XMLHttpRequest<"u",_c=mc&&function(e){return new Promise(function(n,r){let s=e.data;const i=be.from(e.headers).normalize(),o=e.responseType;let a;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let u;m.isFormData(s)&&(pe.isStandardBrowserEnv||pe.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?m.isString(u=i.getContentType())&&i.setContentType(u.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let l=new XMLHttpRequest;if(e.auth){const h=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(h+":"+_))}const d=yi(e.baseURL,e.url);l.open(e.method.toUpperCase(),pi(d,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function f(){if(!l)return;const h=be.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:h,config:e,request:l};cc(function(w){n(w),c()},function(w){r(w),c()},g),l=null}if("onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(f)},l.onabort=function(){l&&(r(new O("Request aborted",O.ECONNABORTED,e,l)),l=null)},l.onerror=function(){r(new O("Network Error",O.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let _=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const g=e.transitional||mi;e.timeoutErrorMessage&&(_=e.timeoutErrorMessage),r(new O(_,g.clarifyTimeoutError?O.ETIMEDOUT:O.ECONNABORTED,e,l)),l=null},pe.isStandardBrowserEnv){const h=fc(d)&&e.xsrfCookieName&&uc.read(e.xsrfCookieName);h&&i.set(e.xsrfHeaderName,h)}s===void 0&&i.setContentType(null),"setRequestHeader"in l&&m.forEach(i.toJSON(),function(_,g){l.setRequestHeader(g,_)}),m.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&o!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",ts(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",ts(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=h=>{l&&(r(!h||h.type?new xt(null,e,l):h),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const p=hc(d);if(p&&pe.protocols.indexOf(p)===-1){r(new O("Unsupported protocol "+p+":",O.ERR_BAD_REQUEST,e));return}l.send(s||null)})},Wn={http:ja,xhr:_c};m.forEach(Wn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ns=e=>`- ${e}`,gc=e=>m.isFunction(e)||e===null||e===!1,Ei={getAdapter:e=>{e=m.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let o;if(r=n,!gc(n)&&(r=Wn[(o=String(n)).toLowerCase()],r===void 0))throw new O(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(ns).join(`
`):" "+ns(i[0]):"as no adapter specified";throw new O("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Wn};function Ln(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xt(null,e)}function rs(e){return Ln(e),e.headers=be.from(e.headers),e.data=An.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ei.getAdapter(e.adapter||Sr.adapter)(e).then(function(r){return Ln(e),r.data=An.call(e,e.transformResponse,r),r.headers=be.from(r.headers),r},function(r){return gi(r)||(Ln(e),r&&r.response&&(r.response.data=An.call(e,e.transformResponse,r.response),r.response.headers=be.from(r.response.headers))),Promise.reject(r)})}const ss=e=>e instanceof be?e.toJSON():e;function Je(e,t){t=t||{};const n={};function r(u,l,d){return m.isPlainObject(u)&&m.isPlainObject(l)?m.merge.call({caseless:d},u,l):m.isPlainObject(l)?m.merge({},l):m.isArray(l)?l.slice():l}function s(u,l,d){if(m.isUndefined(l)){if(!m.isUndefined(u))return r(void 0,u,d)}else return r(u,l,d)}function i(u,l){if(!m.isUndefined(l))return r(void 0,l)}function o(u,l){if(m.isUndefined(l)){if(!m.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function a(u,l,d){if(d in t)return r(u,l);if(d in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l)=>s(ss(u),ss(l),!0)};return m.forEach(Object.keys(Object.assign({},e,t)),function(l){const d=c[l]||s,f=d(e[l],t[l],l);m.isUndefined(f)&&d!==a||(n[l]=f)}),n}const Si="1.6.0",br={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{br[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const is={};br.transitional=function(t,n,r){function s(i,o){return"[Axios v"+Si+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(t===!1)throw new O(s(o," has been removed"+(n?" in "+n:"")),O.ERR_DEPRECATED);return n&&!is[o]&&(is[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,a):!0}};function yc(e,t,n){if(typeof e!="object")throw new O("options must be an object",O.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const a=e[i],c=a===void 0||o(a,i,e);if(c!==!0)throw new O("option "+i+" must be "+c,O.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new O("Unknown option "+i,O.ERR_BAD_OPTION)}}const Yn={assertOptions:yc,validators:br},Re=Yn.validators;class qt{constructor(t){this.defaults=t,this.interceptors={request:new Zr,response:new Zr}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Je(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Yn.assertOptions(r,{silentJSONParsing:Re.transitional(Re.boolean),forcedJSONParsing:Re.transitional(Re.boolean),clarifyTimeoutError:Re.transitional(Re.boolean)},!1),s!=null&&(m.isFunction(s)?n.paramsSerializer={serialize:s}:Yn.assertOptions(s,{encode:Re.function,serialize:Re.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&m.merge(i.common,i[n.method]);i&&m.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=be.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(c=c&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let l,d=0,f;if(!c){const h=[rs.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,u),f=h.length,l=Promise.resolve(n);d<f;)l=l.then(h[d++],h[d++]);return l}f=a.length;let p=n;for(d=0;d<f;){const h=a[d++],_=a[d++];try{p=h(p)}catch(g){_.call(this,g);break}}try{l=rs.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,f=u.length;d<f;)l=l.then(u[d++],u[d++]);return l}getUri(t){t=Je(this.defaults,t);const n=yi(t.baseURL,t.url);return pi(n,t.params,t.paramsSerializer)}}m.forEach(["delete","get","head","options"],function(t){qt.prototype[t]=function(n,r){return this.request(Je(r||{},{method:t,url:n,data:(r||{}).data}))}});m.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,a){return this.request(Je(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}qt.prototype[t]=n(),qt.prototype[t+"Form"]=n(!0)});const Wt=qt;class wr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,a){r.reason||(r.reason=new xt(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new wr(function(s){t=s}),cancel:t}}}const Ec=wr;function Sc(e){return function(n){return e.apply(null,n)}}function bc(e){return m.isObject(e)&&e.isAxiosError===!0}const qn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qn).forEach(([e,t])=>{qn[t]=e});const wc=qn;function bi(e){const t=new Wt(e),n=ni(Wt.prototype.request,t);return m.extend(n,Wt.prototype,t,{allOwnKeys:!0}),m.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return bi(Je(e,s))},n}const q=bi(Sr);q.Axios=Wt;q.CanceledError=xt;q.CancelToken=Ec;q.isCancel=gi;q.VERSION=Si;q.toFormData=dn;q.AxiosError=O;q.Cancel=q.CanceledError;q.all=function(t){return Promise.all(t)};q.spread=Sc;q.isAxiosError=bc;q.mergeConfig=Je;q.AxiosHeaders=be;q.formToJSON=e=>_i(m.isHTMLForm(e)?new FormData(e):e);q.getAdapter=Ei.getAdapter;q.HttpStatusCode=wc;q.default=q;const vc=q;window.axios=vc;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const wi=Object.prototype.toString;function vi(e){switch(wi.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Ue(e,Error)}}function st(e,t){return wi.call(e)===`[object ${t}]`}function vr(e){return st(e,"ErrorEvent")}function os(e){return st(e,"DOMError")}function Tc(e){return st(e,"DOMException")}function Pe(e){return st(e,"String")}function Ti(e){return e===null||typeof e!="object"&&typeof e!="function"}function Xe(e){return st(e,"Object")}function hn(e){return typeof Event<"u"&&Ue(e,Event)}function Rc(e){return typeof Element<"u"&&Ue(e,Element)}function kc(e){return st(e,"RegExp")}function Tr(e){return!!(e&&e.then&&typeof e.then=="function")}function Ic(e){return Xe(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function xc(e){return typeof e=="number"&&e!==e}function Ue(e,t){try{return e instanceof t}catch{return!1}}function Ri(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Ve(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function as(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Ri(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Oc(e,t,n=!1){return Pe(e)?kc(t)?t.test(e):Pe(t)?n?e===t:e.includes(t):!1:!1}function Ot(e,t=[],n=!1){return t.some(r=>Oc(e,r,n))}function Cc(e,t,n=250,r,s,i,o){if(!i.exception||!i.exception.values||!o||!Ue(o.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=Nc(Vn(e,t,s,o.originalException,r,i.exception.values,a,0),n))}function Vn(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(Ue(r[s],Error)){cs(o,a);const u=e(t,r[s]),l=c.length;us(u,s,l,a),c=Vn(e,t,n,r[s],s,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(Ue(u,Error)){cs(o,a);const d=e(t,u),f=c.length;us(d,`errors[${l}]`,f,a),c=Vn(e,t,n,u,s,[d,...c],d,f)}}),c}function cs(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function us(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Nc(e,t){return e.map(n=>(n.value&&(n.value=Ve(n.value,t)),n))}function At(e){return e&&e.Math==Math?e:void 0}const z=typeof globalThis=="object"&&At(globalThis)||typeof window=="object"&&At(window)||typeof self=="object"&&At(self)||typeof global=="object"&&At(global)||function(){return this}()||{};function Ct(){return z}function ki(e,t,n){const r=n||z,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const Dc=Ct(),Mc=80;function St(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||Mc;for(;n&&i++<r&&(u=Ac(n,l),!(u==="html"||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Ac(e,t){const n=e,r=[];let s,i,o,a,c;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&Pe(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function Lc(){try{return Dc.document.location.href}catch{return""}}const Bc="Sentry Logger ",Kn=["debug","info","warn","error","log","assert","trace"],Vt={};function Ii(e){if(!("console"in z))return e();const t=z.console,n={},r=Object.keys(Vt);r.forEach(s=>{const i=Vt[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Pc(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Kn.forEach(n=>{t[n]=(...r)=>{e&&Ii(()=>{z.console[n](`${Bc}[${n}]:`,...r)})}}):Kn.forEach(n=>{t[n]=()=>{}}),t}const y=Pc(),Uc=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Fc(e){return e==="http"||e==="https"}function pn(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Hc(e){const t=Uc.exec(e);if(!t){console.error(`Invalid Sentry Dsn: ${e}`);return}const[n,r,s="",i,o="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return xi({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function xi(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function $c(e){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(y.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Fc(r)?t&&isNaN(parseInt(t,10))?(y.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(y.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(y.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function jc(e){const t=typeof e=="string"?Hc(e):xi(e);if(!(!t||!$c(t)))return t}class he extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function Q(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);typeof s=="function"&&Oi(s,r),e[t]=s}function bt(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Oi(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,bt(e,"__sentry_original__",t)}catch{}}function Rr(e){return e.__sentry_original__}function zc(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function Ci(e){if(vi(e))return{message:e.message,name:e.name,stack:e.stack,...ds(e)};if(hn(e)){const t={type:e.type,target:ls(e.target),currentTarget:ls(e.currentTarget),...ds(e)};return typeof CustomEvent<"u"&&Ue(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function ls(e){try{return Rc(e)?St(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function ds(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Gc(e,t=40){const n=Object.keys(Ci(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ve(n[0],t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:Ve(s,t)}return""}function it(e){return Jn(e,new Map)}function Jn(e,t){if(Xe(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.keys(e))typeof e[s]<"u"&&(r[s]=Jn(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(Jn(s,t))}),r}return e}function me(){const e=z,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>t.getRandomValues(new Uint8Array(1))[0])}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Ni(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Oe(e){const{message:t,event_id:n}=e;if(t)return t;const r=Ni(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Xn(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function wt(e,t){const n=Ni(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s&&s.data,...t.data};n.mechanism.data=i}}function fs(e){if(e&&e.__sentry_captured__)return!0;try{bt(e,"__sentry_captured__",!0)}catch{}return!1}function Di(e){return Array.isArray(e)?e:[e]}const Mi=50,hs=/\(error: (.*)\)/,ps=/captureMessage|captureException/;function Ai(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[],i=n.split(`
`);for(let o=r;o<i.length;o++){const a=i[o];if(a.length>1024)continue;const c=hs.test(a)?a.replace(hs,"$1"):a;if(!c.match(/\S*Error: /)){for(const u of t){const l=u(c);if(l){s.push(l);break}}if(s.length>=Mi)break}}return Yc(s)}}function Wc(e){return Array.isArray(e)?Ai(...e):e}function Yc(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),ps.test(t[t.length-1].function||"")&&(t.pop(),ps.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,Mi).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const Bn="<anonymous>";function ve(e){try{return!e||typeof e!="function"?Bn:e.name||Bn}catch{return Bn}}const Qn=Ct();function Li(){if(!("fetch"in Qn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Zn(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function qc(){if(!Li())return!1;if(Zn(Qn.fetch))return!0;let e=!1;const t=Qn.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Zn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}const Lt=Ct();function Vc(){const e=Lt.chrome,t=e&&e.app&&e.app.runtime,n="history"in Lt&&!!Lt.history.pushState&&!!Lt.history.replaceState;return!t&&n}const X=Ct(),Ae="__sentry_xhr_v2__",pt={},ms={};function Kc(e){if(!ms[e])switch(ms[e]=!0,e){case"console":Jc();break;case"dom":iu();break;case"xhr":Zc();break;case"fetch":Xc();break;case"history":eu();break;case"error":ou();break;case"unhandledrejection":au();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("unknown instrumentation type:",e);return}}function ae(e,t){pt[e]=pt[e]||[],pt[e].push(t),Kc(e)}function le(e,t){if(!(!e||!pt[e]))for(const n of pt[e]||[])try{n(t)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ve(n)}
Error:`,r)}}function Jc(){"console"in z&&Kn.forEach(function(e){e in z.console&&Q(z.console,e,function(t){return Vt[e]=t,function(...n){le("console",{args:n,level:e});const r=Vt[e];r&&r.apply(z.console,n)}})})}function Xc(){qc()&&Q(z,"fetch",function(e){return function(...t){const{method:n,url:r}=Qc(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return le("fetch",{...s}),e.apply(z,t).then(i=>(le("fetch",{...s,endTimestamp:Date.now(),response:i}),i),i=>{throw le("fetch",{...s,endTimestamp:Date.now(),error:i}),i})}})}function er(e,t){return!!e&&typeof e=="object"&&!!e[t]}function _s(e){return typeof e=="string"?e:e?er(e,"url")?e.url:e.toString?e.toString():"":""}function Qc(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:_s(n),method:er(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:_s(t),method:er(t,"method")?String(t.method).toUpperCase():"GET"}}function Zc(){if(!X.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;Q(e,"open",function(t){return function(...n){const r=Date.now(),s=n[1],i=this[Ae]={method:Pe(n[0])?n[0].toUpperCase():n[0],url:n[1],request_headers:{}};Pe(s)&&i.method==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[Ae];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}le("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:r,xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?Q(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),Q(this,"setRequestHeader",function(a){return function(...c){const[u,l]=c,d=this[Ae];return d&&(d.request_headers[u.toLowerCase()]=l),a.apply(this,c)}}),t.apply(this,n)}}),Q(e,"send",function(t){return function(...n){const r=this[Ae];return r&&n[0]!==void 0&&(r.body=n[0]),le("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),t.apply(this,n)}})}let Bt;function eu(){if(!Vc())return;const e=X.onpopstate;X.onpopstate=function(...n){const r=X.location.href,s=Bt;if(Bt=r,le("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=Bt,o=String(s);Bt=o,le("history",{from:i,to:o})}return n.apply(this,r)}}Q(X.history,"pushState",t),Q(X.history,"replaceState",t)}const tu=1e3;let gs,tr,nr;function nu(e){if(e.type!==tr)return!1;try{if(!e.target||e.target._sentryId!==nr)return!1}catch{}return!0}function ru(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function su(e){try{return e.target}catch{return null}}function ys(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=su(n);if(ru(n.type,r))return;bt(n,"_sentryCaptured",!0),r&&!r._sentryId&&bt(r,"_sentryId",me());const s=n.type==="keypress"?"input":n.type;nu(n)||(e({event:n,name:s,global:t}),tr=n.type,nr=r?r._sentryId:void 0),clearTimeout(gs),gs=X.setTimeout(()=>{nr=void 0,tr=void 0},tu)}}function iu(){if(!X.document)return;const e=le.bind(null,"dom"),t=ys(e,!0);X.document.addEventListener("click",t,!1),X.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=X[n]&&X[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(Q(r,"addEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[i]=u[i]||{refCount:0};if(!l.handler){const d=ys(e);l.handler=d,s.call(this,i,d,a)}l.refCount++}catch{}return s.call(this,i,o,a)}}),Q(r,"removeEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[i];l&&(l.refCount--,l.refCount<=0&&(s.call(this,i,l.handler,a),l.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,o,a)}}))})}let Pt=null;function ou(){Pt=X.onerror,X.onerror=function(e,t,n,r,s){return le("error",{column:r,error:s,line:n,msg:e,url:t}),Pt&&!Pt.__SENTRY_LOADER__?Pt.apply(this,arguments):!1},X.onerror.__SENTRY_INSTRUMENTED__=!0}let Ut=null;function au(){Ut=X.onunhandledrejection,X.onunhandledrejection=function(e){return le("unhandledrejection",e),Ut&&!Ut.__SENTRY_LOADER__?Ut.apply(this,arguments):!0},X.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function cu(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function uu(){return"npm"}function Bi(){return!cu()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function lu(e,t){return e.require(t)}function Es(){return typeof window<"u"&&(!Bi()||du())}function du(){return z.process!==void 0&&z.process.type==="renderer"}function fu(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(s){if(e)return t.has(s)?!0:(t.add(s),!1);for(let i=0;i<t.length;i++)if(t[i]===s)return!0;return t.push(s),!1}function r(s){if(e)t.delete(s);else for(let i=0;i<t.length;i++)if(t[i]===s){t.splice(i,1);break}}return[n,r]}function fe(e,t=100,n=1/0){try{return rr("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Pi(e,t=3,n=100*1024){const r=fe(e,t);return _u(r)>n?Pi(e,t-1,n):r}function rr(e,t,n=1/0,r=1/0,s=fu()){const[i,o]=s;if(t==null||["number","boolean","string"].includes(typeof t)&&!xc(t))return t;const a=hu(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return rr("",p,c-1,r,s)}catch{}const l=Array.isArray(t)?[]:{};let d=0;const f=Ci(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const h=f[p];l[p]=rr(p,h,c-1,r,s),d++}return o(t),l}function hu(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Ri(t))return"[VueViewModel]";if(Ic(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${ve(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=pu(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function pu(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function mu(e){return~-encodeURI(e).split(/%..|./).length}function _u(e){return mu(JSON.stringify(e))}var Ee;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Ee||(Ee={}));function Fe(e){return new ie(t=>{t(e)})}function kr(e){return new ie((t,n)=>{n(e)})}class ie{constructor(t){ie.prototype.__init.call(this),ie.prototype.__init2.call(this),ie.prototype.__init3.call(this),ie.prototype.__init4.call(this),this._state=Ee.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new ie((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new ie((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(Ee.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Ee.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Ee.PENDING){if(Tr(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Ee.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ee.RESOLVED&&n[1](this._value),this._state===Ee.REJECTED&&n[2](this._value),n[0]=!0)})}}}function gu(e){const t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]}function s(o){if(!n())return kr(new he("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new ie((a,c)=>{let u=t.length;if(!u)return a(!0);const l=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{Fe(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:t,add:s,drain:i}}function Pn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const yu=["fatal","error","warning","log","info","debug"];function Eu(e){return e==="warn"?"warning":yu.includes(e)?e:"log"}const Ui=Ct(),sr={nowSeconds:()=>Date.now()/1e3};function Su(){const{performance:e}=Ui;if(!e||!e.now)return;const t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function bu(){try{return lu(ra,"perf_hooks").performance}catch{return}}const Un=Bi()?bu():Su(),Ss=Un===void 0?sr:{nowSeconds:()=>(Un.timeOrigin+Un.now())/1e3},mn=sr.nowSeconds.bind(sr),Fi=Ss.nowSeconds.bind(Ss),wu=(()=>{const{performance:e}=Ui;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=e.timing&&e.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return i||u?s<=c?e.timeOrigin:o:r})();function ot(e,t=[]){return[e,t]}function vu(e,t){const[n,r]=e;return[n,[...r,t]]}function bs(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function ir(e,t){return(t||new TextEncoder).encode(e)}function Tu(e,t){const[n,r]=e;let s=JSON.stringify(n);function i(o){typeof s=="string"?s=typeof o=="string"?s+o:[ir(s,t),o]:s.push(typeof o=="string"?ir(o,t):o)}for(const o of r){const[a,c]=o;if(i(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(fe(c))}i(u)}}return typeof s=="string"?s:Ru(s)}function Ru(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function ku(e,t){const n=typeof e.data=="string"?ir(e.data,t):e.data;return[it({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Iu={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",statsd:"unknown"};function ws(e){return Iu[e]}function Ir(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Hi(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:pn(r)},...s&&{trace:it({...s})}}}function xu(e,t,n){const r=[{type:"client_report"},{timestamp:n||mn(),discarded_events:e}];return ot(t?{dsn:t}:{},[r])}const Ou=60*1e3;function Cu(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Ou:r-t}function Nu(e,t){return e[t]||e.all||0}function $i(e,t,n=Date.now()){return Nu(e,t)>n}function ji(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u]=a.split(":",2),l=parseInt(c,10),d=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+d;else for(const f of u.split(";"))s[f]=r+d}else o?s.all=r+Cu(o,r):t===429&&(s.all=r+60*1e3);return s}const xr="production";function Or(){return ki("globalEventProcessors",()=>[])}function zi(e){Or().push(e)}function Kt(e,t,n,r=0){return new ie((s,i)=>{const o=e[r];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&o.id&&a===null&&y.log(`Event processor "${o.id}" dropped event`),Tr(a)?a.then(c=>Kt(e,c,n,r+1).then(s)).then(null,i):Kt(e,a,n,r+1).then(s).then(null,i)}})}function Du(e){const t=Fi(),n={sid:me(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Au(n)};return e&&Qe(n,e),n}function Qe(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Fi(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:me()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Mu(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),Qe(e,n)}function Au(e){return it({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const Lu=100;class Be{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=vs()}static clone(t){const n=new Be;return t&&(n._breadcrumbs=[...t._breadcrumbs],n._tags={...t._tags},n._extra={...t._extra},n._contexts={...t._contexts},n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=[...t._eventProcessors],n._requestSession=t._requestSession,n._attachments=[...t._attachments],n._sdkProcessingMetadata={...t._sdkProcessingMetadata},n._propagationContext={...t._propagationContext}),n}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&Qe(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof Be?n:this}return t instanceof Be?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):Xe(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=vs(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:Lu;if(r<=0)return this;const s={timestamp:mn(),...t},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,n={},r){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const o=this._span.transaction;if(o){t.sdkProcessingMetadata={dynamicSamplingContext:o.getDynamicSamplingContext(),...t.sdkProcessingMetadata};const a=o.name;a&&(t.tags={transaction:a,...t.tags})}}this._applyFingerprint(t);const s=this._getBreadcrumbs(),i=[...t.breadcrumbs||[],...s];return t.breadcrumbs=i.length>0?i:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},Kt([...r||[],...Or(),...this._eventProcessors],t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?Di(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function vs(){return{traceId:me(),spanId:me().substring(16)}}const Gi=4,Bu=100;class Wi{constructor(t,n=new Be,r=Gi){this._version=r,this._stack=[{scope:n}],t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=Be.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();try{t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:me(),s=new Error("Sentry syntheticException");return this._withClient((i,o)=>{i.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},o)}),r}captureMessage(t,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:me(),i=new Error(t);return this._withClient((o,a)=>{o.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},a)}),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:me();return t.type||(this._lastEventId=r),this._withClient((s,i)=>{s.captureEvent(t,{...n,event_id:r},i)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Bu}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const c={timestamp:mn(),...t},u=i?Ii(()=>i(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=Ts(this);try{t(this)}finally{Ts(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!r){const s=this.getClient();console.warn(s?`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`:"Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&Mu(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=xr}=r&&r.getOptions()||{},{userAgent:o}=z.navigator||{},a=Du({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&Qe(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(t){const{scope:n,client:r}=this.getStackTop();r&&t(r,n)}_callExtensionMethod(t,...n){const s=_n().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function _n(){return z.__SENTRY__=z.__SENTRY__||{extensions:{},hub:void 0},z}function Ts(e){const t=_n(),n=or(t);return Yi(t,e),n}function M(){const e=_n();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return Pu(e)}function Pu(e=_n()){return(!Uu(e)||or(e).isOlderThan(Gi))&&Yi(e,new Wi),or(e)}function Uu(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function or(e){return ki("hub",()=>new Wi,e)}function Yi(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Fu(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=it({environment:r.environment||xr,release:r.release,user_segment:i,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function Cr(e,t){return M().captureException(e,{captureContext:t})}function Hu(e,t){M().setContext(e,t)}function $u(e){M().withScope(e)}const ju="7";function zu(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Gu(e){return`${zu(e)}${e.projectId}/envelope/`}function Wu(e,t){return zc({sentry_key:e.publicKey,sentry_version:ju,...t&&{sentry_client:`${t.name}/${t.version}`}})}function Yu(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${Gu(e)}?${Wu(e,r)}`}function qu(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Vu(e,t,n,r){const s=Ir(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:pn(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return ot(i,[o])}function Ku(e,t,n,r){const s=Ir(n),i=e.type&&e.type!=="replay_event"?e.type:"event";qu(e,n&&n.sdk);const o=Hi(e,s,r,t);return delete e.sdkProcessingMetadata,ot(o,[[{type:i},e]])}const Rs=[];function Ju(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function Xu(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Di(n(t)):r=t;const s=Ju(r),i=Zu(s,o=>o.name==="Debug");if(i!==-1){const[o]=s.splice(i,1);s.push(o)}return s}function Qu(e,t){const n={};return t.forEach(r=>{r&&qi(e,r,n)}),n}function qi(e,t,n){if(n[t.name]=t,Rs.indexOf(t.name)===-1&&(t.setupOnce(zi,M),Rs.push(t.name)),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(s)}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log(`Integration installed: ${t.name}`)}function Zu(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function Vi(e,t,n,r,s){const{normalizeDepth:i=3,normalizeMaxBreadth:o=1e3}=e,a={...t,event_id:t.event_id||n.event_id||me(),timestamp:t.timestamp||mn()},c=n.integrations||e.integrations.map(f=>f.name);el(a,e),rl(a,c),t.type===void 0&&tl(a,e.stackParser);let u=r;n.captureContext&&(u=Be.clone(u).update(n.captureContext));let l=Fe(a);const d=s&&s.getEventProcessors?s.getEventProcessors():[];if(u){if(u.getAttachments){const f=[...n.attachments||[],...u.getAttachments()];f.length&&(n.attachments=f)}l=u.applyToEvent(a,n,d)}else l=Kt([...d,...Or()],a,n);return l.then(f=>(f&&nl(f),typeof i=="number"&&i>0?sl(f,i,o):f))}function el(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:xr),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=Ve(e.message,i));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Ve(o.value,i));const a=e.request;a&&a.url&&(a.url=Ve(a.url,i))}const ks=new WeakMap;function tl(e,t){const n=z._sentryDebugIds;if(!n)return;let r;const s=ks.get(t);s?r=s:(r=new Map,ks.set(t,r));const i=Object.keys(n).reduce((o,a)=>{let c;const u=r.get(a);u?c=u:(c=t(a),r.set(a,c));for(let l=c.length-1;l>=0;l--){const d=c[l];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{e.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function nl(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function rl(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function sl(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:fe(s.data,t,n)}}))},...e.user&&{user:fe(e.user,t,n)},...e.contexts&&{contexts:fe(e.contexts,t,n)},...e.extra&&{extra:fe(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=fe(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>(s.data&&(s.data=fe(s.data,t,n)),s))),r}const Is="Not capturing exception because it's already been captured.";class il{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=jc(t.dsn):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("No DSN provided, client will not send events."),this._dsn){const n=Yu(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(fs(t)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log(Is);return}let s=n&&n.event_id;return this._process(this.eventFromException(t,n).then(i=>this._captureEvent(i,n,r)).then(i=>{s=i})),s}captureMessage(t,n,r,s){let i=r&&r.event_id;const o=Ti(t)?this.eventFromMessage(String(t),n,r):this.eventFromException(t,r);return this._process(o.then(a=>this._captureEvent(a,r,s)).then(a=>{i=a})),i}captureEvent(t,n,r){if(n&&n.originalException&&fs(n.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log(Is);return}let s=n&&n.event_id;return this._process(this._captureEvent(t,n,r).then(i=>{s=i})),s}captureSession(t){typeof t.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Qe(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s)):Fe(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&(this._integrations=Qu(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){qi(this,t,this._integrations)}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Ku(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=vu(r,ku(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const n=Vu(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const s=`${t}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log(`Adding outcome: "${s}"`),this._outcomes[s]=this._outcomes[s]+1||1}}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_updateSessionFromEvent(t,n){let r=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const c of i){const u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(Qe(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new ie(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,t&&r>=t&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r){const s=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i.length>0&&(n.integrations=i),this.emit("preprocessEvent",t,n),Vi(s,t,n,r,this).then(o=>{if(o===null)return o;const{propagationContext:a}=o.sdkProcessingMetadata||{};if(!(o.contexts&&o.contexts.trace)&&a){const{traceId:u,spanId:l,parentSpanId:d,dsc:f}=a;o.contexts={trace:{trace_id:u,span_id:l,parent_span_id:d},...o.contexts};const p=f||Fu(u,this,r);o.sdkProcessingMetadata={dynamicSamplingContext:p,...o.sdkProcessingMetadata}}return o})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(s=>s.event_id,s=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const i=s;i.logLevel==="log"?y.log(i.message):y.warn(i)}})}_processEvent(t,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=Ji(t),a=Ki(t),c=t.type||"error",u=`before send for type \`${c}\``;if(a&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",t),kr(new he(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const l=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,r).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",l,t),new he("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;const p=al(s,d,n);return ol(p,u)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",l,t),new he(`${u} returned \`null\`, will not send event.`,"log");const f=r&&r.getSession();!o&&f&&this._updateSessionFromEvent(f,d);const p=d.transaction_info;if(o&&p&&d.transaction!==t.transaction){const h="custom";d.transaction_info={...p,source:h}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof he?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new he(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:t[n]}})}}function ol(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Tr(e))return e.then(r=>{if(!Xe(r)&&r!==null)throw new he(n);return r},r=>{throw new he(`${t} rejected with ${r}`)});if(!Xe(e)&&e!==null)throw new he(n);return e}function al(e,t,n){const{beforeSend:r,beforeSendTransaction:s}=e;return Ki(t)&&r?r(t,n):Ji(t)&&s?s(t,n):t}function Ki(e){return e.type===void 0}function Ji(e){return e.type==="transaction"}function cl(e,t){t.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?y.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=M();n.getScope().update(t.initialScope);const s=new e(t);n.bindClient(s)}const ul=30;function Xi(e,t,n=gu(e.bufferSize||ul)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(bs(o,(d,f)=>{const p=ws(f);if($i(r,p)){const h=xs(d,f);e.recordDroppedEvent("ratelimit_backoff",p,h)}else a.push(d)}),a.length===0)return Fe();const c=ot(o[0],a),u=d=>{bs(c,(f,p)=>{const h=xs(f,p);e.recordDroppedEvent(d,ws(p),h)})},l=()=>t({body:Tu(c,e.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=ji(r,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof he)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("Skipped sending event because buffer is full."),u("queue_overflow"),Fe();throw d})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function xs(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}const Os="7.79.0";let Cs;class gn{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=gn.id}setupOnce(){Cs=Function.prototype.toString;try{Function.prototype.toString=function(...t){const n=Rr(this)||this;return Cs.apply(n,t)}}catch{}}}gn.__initStatic();const ll=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],dl=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class yn{static __initStatic(){this.id="InboundFilters"}constructor(t={}){this.name=yn.id,this._options=t}setupOnce(t,n){}processEvent(t,n,r){const s=r.getOptions(),i=fl(this._options,s);return hl(t,i)?null:t}}yn.__initStatic();function fl(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ll],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:dl],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function hl(e,t){return t.ignoreInternal&&El(e)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Event dropped due to being internal Sentry Error.
Event: ${Oe(e)}`),!0):pl(e,t.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Oe(e)}`),!0):ml(e,t.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Oe(e)}`),!0):_l(e,t.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Oe(e)}.
Url: ${Jt(e)}`),!0):gl(e,t.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Oe(e)}.
Url: ${Jt(e)}`),!0)}function pl(e,t){return e.type||!t||!t.length?!1:yl(e).some(n=>Ot(n,t))}function ml(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Ot(n,t):!1}function _l(e,t){if(!t||!t.length)return!1;const n=Jt(e);return n?Ot(n,t):!1}function gl(e,t){if(!t||!t.length)return!0;const n=Jt(e);return n?Ot(n,t):!0}function yl(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&t.length===0&&y.error(`Could not extract message for event ${Oe(e)}`),t}function El(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function Sl(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Jt(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?Sl(t):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error(`Cannot extract url for event ${Oe(e)}`),null}}function bl(e,t){const n=t.getClient(),r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return vl(e,r)||wl(e,s)}function wl(e,t){return t?Ns(e)===Ns(t):!1}function vl(e,t){return t?e.includes(t.host):!1}function Ns(e){return e[e.length-1]==="/"?e.slice(0,-1):e}const A=z;let ar=0;function Qi(){return ar>0}function Tl(){ar++,setTimeout(()=>{ar--})}function Ze(e,t={},n){if(typeof e!="function")return e;try{const s=e.__sentry_wrapped__;if(s)return s;if(Rr(e))return e}catch{return e}const r=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const i=s.map(o=>Ze(o,t));return e.apply(this,i)}catch(i){throw Tl(),$u(o=>{o.addEventProcessor(a=>(t.mechanism&&(Xn(a,void 0,void 0),wt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),Cr(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}Oi(r,e),bt(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Zi(e,t){const n=Nr(e,t),r={type:t&&t.name,value:xl(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Rl(e,t,n,r){const i=M().getClient(),o=i&&i.getOptions().normalizeDepth,a={exception:{values:[{type:hn(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Nl(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Pi(t,o)}};if(n){const c=Nr(e,n);c.length&&(a.exception.values[0].stacktrace={frames:c})}return a}function Fn(e,t){return{exception:{values:[Zi(e,t)]}}}function Nr(e,t){const n=t.stacktrace||t.stack||"",r=Il(t);try{return e(n,r)}catch{}return[]}const kl=/Minified React error #\d+;/i;function Il(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(kl.test(e.message))return 1}return 0}function xl(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Ol(e,t,n,r){const s=n&&n.syntheticException||void 0,i=Dr(e,t,s,r);return wt(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Fe(i)}function Cl(e,t,n="info",r,s){const i=r&&r.syntheticException||void 0,o=cr(e,t,i,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Fe(o)}function Dr(e,t,n,r,s){let i;if(vr(t)&&t.error)return Fn(e,t.error);if(os(t)||Tc(t)){const o=t;if("stack"in t)i=Fn(e,t);else{const a=o.name||(os(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=cr(e,c,n,r),Xn(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return vi(t)?Fn(e,t):Xe(t)||hn(t)?(i=Rl(e,t,n,s),wt(i,{synthetic:!0}),i):(i=cr(e,t,n,r),Xn(i,`${t}`,void 0),wt(i,{synthetic:!0}),i)}function cr(e,t,n,r){const s={message:t};if(r&&n){const i=Nr(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]})}return s}function Nl(e,{isUnhandledRejection:t}){const n=Gc(e),r=t?"promise rejection":"exception";return vr(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:hn(e)?`Event \`${Dl(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Dl(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Ml(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:pn(r)}},i=Al(e);return ot(s,[i])}function Al(e){return[{type:"user_report"},e]}class Ll extends il{constructor(t){const n=A.SENTRY_SDK_SOURCE||uu();t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:Os}],version:Os},super(t),t.sendClientReports&&A.document&&A.document.addEventListener("visibilitychange",()=>{A.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return Ol(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Cl(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("SDK not enabled, will not capture user feedback.");return}const n=Ml(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log("Sending outcomes:",t);const n=xu(t,this._options.tunnel&&pn(this._dsn));this._sendEnvelope(n)}}let ht;function Bl(){if(ht)return ht;if(Zn(A.fetch))return ht=A.fetch.bind(A);const e=A.document;let t=A.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return ht=t.bind(A)}function Pl(){ht=void 0}function Ul(e,t=Bl()){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Pl(),n-=o,r--,kr(c)}}return Xi(e,s)}const Fl=4;function Hl(e){function t(n){return new ie((r,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===Fl&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url);for(const o in e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&i.setRequestHeader(o,e.headers[o]);i.send(n.body)})}return Xi(e,t)}const En="?",$l=30,jl=40,zl=50;function Mr(e,t,n,r){const s={filename:e,function:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const Gl=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Wl=/\((\S*)(?::(\d+))(?::(\d+))\)/,Yl=e=>{const t=Gl.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const i=Wl.exec(t[2]);i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3])}const[r,s]=eo(t[1]||En,t[2]);return Mr(s,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},ql=[$l,Yl],Vl=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Kl=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Jl=e=>{const t=Vl.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=Kl.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],s=t[1]||En;return[s,r]=eo(s,r),Mr(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Xl=[zl,Jl],Ql=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Zl=e=>{const t=Ql.exec(e);return t?Mr(t[2],t[1]||En,+t[3],t[4]?+t[4]:void 0):void 0},ed=[jl,Zl],td=[ql,Xl,ed],nd=Ai(...td),eo=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:En,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class at{static __initStatic(){this.id="GlobalHandlers"}constructor(t){this.name=at.id,this._options={onerror:!0,onunhandledrejection:!0,...t},this._installFunc={onerror:rd,onunhandledrejection:sd}}setupOnce(){Error.stackTraceLimit=50;const t=this._options;for(const n in t){const r=this._installFunc[n];r&&t[n]&&(ad(n),r(),this._installFunc[n]=void 0)}}}at.__initStatic();function rd(){ae("error",e=>{const[t,n,r]=ro();if(!t.getIntegration(at))return;const{msg:s,url:i,line:o,column:a,error:c}=e;if(Qi()||c&&c.__sentry_own_request__)return;const u=c===void 0&&Pe(s)?od(s,i,o,a):to(Dr(n,c||s,void 0,r,!1),i,o,a);u.level="error",no(t,c,u,"onerror")})}function sd(){ae("unhandledrejection",e=>{const[t,n,r]=ro();if(!t.getIntegration(at))return;let s=e;try{"reason"in e?s=e.reason:"detail"in e&&"reason"in e.detail&&(s=e.detail.reason)}catch{}if(Qi()||s&&s.__sentry_own_request__)return!0;const i=Ti(s)?id(s):Dr(n,s,void 0,r,!0);i.level="error",no(t,s,i,"onunhandledrejection")})}function id(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function od(e,t,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=vr(e)?e.message:e,o="Error";const a=i.match(s);return a&&(o=a[1],i=a[2]),to({exception:{values:[{type:o,value:i}]}},t,n,r)}function to(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=Pe(t)&&t.length>0?t:Lc();return c.length===0&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function ad(e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log(`Global Handler attached: ${e}`)}function no(e,t,n,r){wt(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function ro(){const e=M(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}const cd=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Sn{static __initStatic(){this.id="TryCatch"}constructor(t){this.name=Sn.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t}}setupOnce(){this._options.setTimeout&&Q(A,"setTimeout",Ds),this._options.setInterval&&Q(A,"setInterval",Ds),this._options.requestAnimationFrame&&Q(A,"requestAnimationFrame",ud),this._options.XMLHttpRequest&&"XMLHttpRequest"in A&&Q(XMLHttpRequest.prototype,"send",ld);const t=this._options.eventTarget;t&&(Array.isArray(t)?t:cd).forEach(dd)}}Sn.__initStatic();function Ds(e){return function(...t){const n=t[0];return t[0]=Ze(n,{mechanism:{data:{function:ve(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function ud(e){return function(t){return e.apply(this,[Ze(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ve(e)},handled:!1,type:"instrument"}})])}}function ld(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Q(n,s,function(i){const o={mechanism:{data:{function:s,handler:ve(i)},handled:!1,type:"instrument"}},a=Rr(i);return a&&(o.mechanism.data.handler=ve(a)),Ze(i,o)})}),e.apply(this,t)}}function dd(e){const t=A,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(Q(n,"addEventListener",function(r){return function(s,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=Ze(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ve(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,Ze(i,{mechanism:{data:{function:"addEventListener",handler:ve(i),target:e},handled:!1,type:"instrument"}}),o])}}),Q(n,"removeEventListener",function(r){return function(s,i,o){const a=i;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,s,c,o)}catch{}return r.call(this,s,a,o)}}))}const Ft=1024;class bn{static __initStatic(){this.id="Breadcrumbs"}constructor(t){this.name=bn.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t}}setupOnce(){if(this.options.console&&ae("console",pd),this.options.dom&&ae("dom",hd(this.options.dom)),this.options.xhr&&ae("xhr",md),this.options.fetch&&ae("fetch",_d),this.options.history&&ae("history",gd),this.options.sentry){const t=M().getClient();t&&t.on&&t.on("beforeSendEvent",fd)}}}bn.__initStatic();function fd(e){M().addBreadcrumb({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:Oe(e)},{event:e})}function hd(e){function t(n){let r,s=typeof e=="object"?e.serializeAttribute:void 0,i=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;i&&i>Ft&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn(`\`dom.maxStringLength\` cannot exceed ${Ft}, but a value of ${i} was configured. Sentry will use ${Ft} instead.`),i=Ft),typeof s=="string"&&(s=[s]);try{const o=n.event;r=yd(o)?St(o.target,{keyAttrs:s,maxStringLength:i}):St(o,{keyAttrs:s,maxStringLength:i})}catch{r="<unknown>"}r.length!==0&&M().addBreadcrumb({category:`ui.${n.name}`,message:r},{event:n.event,name:n.name,global:n.global})}return t}function pd(e){const t={category:"console",data:{arguments:e.args,logger:"console"},level:Eu(e.level),message:as(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)t.message=`Assertion failed: ${as(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1);else return;M().addBreadcrumb(t,{input:e.args,level:e.level})}function md(e){const{startTimestamp:t,endTimestamp:n}=e,r=e.xhr[Ae];if(!t||!n||!r)return;const{method:s,url:i,status_code:o,body:a}=r,c={method:s,url:i,status_code:o},u={xhr:e.xhr,input:a,startTimestamp:t,endTimestamp:n};M().addBreadcrumb({category:"xhr",data:c,type:"http"},u)}function _d(e){const{startTimestamp:t,endTimestamp:n}=e;if(n&&!(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"))if(e.error){const r=e.fetchData,s={data:e.error,input:e.args,startTimestamp:t,endTimestamp:n};M().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},s)}else{const r={...e.fetchData,status_code:e.response&&e.response.status},s={input:e.args,response:e.response,startTimestamp:t,endTimestamp:n};M().addBreadcrumb({category:"fetch",data:r,type:"http"},s)}}function gd(e){let t=e.from,n=e.to;const r=Pn(A.location.href);let s=Pn(t);const i=Pn(n);s.path||(s=r),r.protocol===i.protocol&&r.host===i.host&&(n=i.relative),r.protocol===s.protocol&&r.host===s.host&&(t=s.relative),M().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}function yd(e){return!!e&&!!e.target}const Ed="cause",Sd=5;class wn{static __initStatic(){this.id="LinkedErrors"}constructor(t={}){this.name=wn.id,this._key=t.key||Ed,this._limit=t.limit||Sd}setupOnce(){}preprocessEvent(t,n,r){const s=r.getOptions();Cc(Zi,s.stackParser,s.maxValueLength,this._key,this._limit,t,n)}}wn.__initStatic();class vn{static __initStatic(){this.id="HttpContext"}constructor(){this.name=vn.id}setupOnce(){}preprocessEvent(t){if(!A.navigator&&!A.location&&!A.document)return;const n=t.request&&t.request.url||A.location&&A.location.href,{referrer:r}=A.document||{},{userAgent:s}=A.navigator||{},i={...t.request&&t.request.headers,...r&&{Referer:r},...s&&{"User-Agent":s}},o={...t.request,...n&&{url:n},headers:i};t.request=o}}vn.__initStatic();class Tn{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Tn.id}setupOnce(t,n){}processEvent(t){if(t.type)return t;try{if(bd(t,this._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return this._previousEvent=t}}Tn.__initStatic();function bd(e,t){return t?!!(wd(e,t)||vd(e,t)):!1}function wd(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!io(e,t)||!so(e,t))}function vd(e,t){const n=Ms(t),r=Ms(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!io(e,t)||!so(e,t))}function so(e,t){let n=As(e),r=As(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function io(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Ms(e){return e.exception&&e.exception.values&&e.exception.values[0]}function As(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const Td=[new yn,new gn,new Sn,new bn,new at,new wn,new Tn,new vn];function Rd(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=Td),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),A.SENTRY_RELEASE&&A.SENTRY_RELEASE.id&&(e.release=A.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:Wc(e.stackParser||nd),integrations:Xu(e),transport:e.transport||(Li()?Ul:Hl)};cl(Ll,t),e.autoSessionTracking&&kd()}function Ls(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function kd(){if(typeof A.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const e=M();e.captureSession&&(Ls(e),ae("history",({from:t,to:n})=>{t===void 0||t===n||Ls(M())}))}const we=z,Id=(e,t,n)=>{let r,s;return i=>{t.value>=0&&(i||n)&&(s=t.value-(r||0),(s||r===void 0)&&(r=t.value,t.delta=s,e(t)))}},xd=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Od=()=>{const e=we.performance.timing,t=we.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},oo=()=>we.__WEB_VITALS_POLYFILL__?we.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Od()):we.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ao=()=>{const e=oo();return e&&e.activationStart||0},Cd=(e,t)=>{const n=oo();let r="navigate";return n&&(we.document.prerendering||ao()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:xd(),navigationType:r}},co=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{t(s.getEntries())});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},uo=(e,t)=>{const n=r=>{(r.type==="pagehide"||we.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};let Yt=-1;const Nd=()=>we.document.visibilityState==="hidden"&&!we.document.prerendering?0:1/0,Dd=()=>{uo(({timeStamp:e})=>{Yt=e},!0)},Md=()=>(Yt<0&&(Yt=Nd(),Dd()),{get firstHiddenTime(){return Yt}}),Bs={},Ad=e=>{const t=Md(),n=Cd("LCP");let r;const s=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-ao(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},i=co("largest-contentful-paint",s);if(i){r=Id(e,n);const o=()=>{Bs[n.id]||(s(i.takeRecords()),i.disconnect(),Bs[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),uo(o,!0),o}},mt={},Xt={};let lo;function Ld(e){return Ud("lcp",e,Pd,lo)}function Bd(e,t){return ho(e,t),Xt[e]||(Fd(e),Xt[e]=!0),po(e,t)}function fo(e,t){const n=mt[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ve(r)}
Error:`,s)}}function Pd(){Ad(e=>{fo("lcp",{metric:e}),lo=e})}function Ud(e,t,n,r){return ho(e,t),Xt[e]||(n(),Xt[e]=!0),r&&t({metric:r}),po(e,t)}function Fd(e){const t={};e==="event"&&(t.durationThreshold=0),co(e,n=>{fo(e,{entries:n})},t)}function ho(e,t){mt[e]=mt[e]||[],mt[e].push(t)}function po(e,t){return()=>{const n=mt[e];if(!n)return;const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}const B=z,Ar="sentryReplaySession",Hd="replay_event",Lr="Unable to send Replay",$d=3e5,jd=9e5,zd=5e3,Gd=5500,Wd=6e4,Yd=5e3,qd=3,Ps=15e4,Ht=5e3,Vd=3e3,Kd=300,Br=2e7,Jd=4999,Xd=15e3,Us=36e5;var K;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(K||(K={}));function Qd(e){return e.nodeType===e.ELEMENT_NODE}function _t(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function gt(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Zd(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function ef(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Qt(e){try{const t=e.rules||e.cssRules;return t?Zd(Array.from(t,mo).join("")):null}catch{return null}}function mo(e){let t;if(nf(e))try{t=Qt(e.styleSheet)||ef(e)}catch{}else if(rf(e)&&e.selectorText.includes(":"))return tf(e.cssText);return t||e.cssText}function tf(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function nf(e){return"styleSheet"in e}function rf(e){return"selectorText"in e}class _o{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var n;if(!t)return-1;const r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function sf(){return new _o}function Rn({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function vt({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function et(e){return e.toLowerCase()}function ur(e){return e.toUpperCase()}const Fs="__rrweb_original__";function of(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,o=Fs in i?i[Fs]:i;if(new Uint32Array(o.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Pr(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?et(t):null}function Zt(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let af=1;const cf=new RegExp("[^a-z0-9-_:]"),Tt=-2;function Ur(){return af++}function uf(e){if(e instanceof HTMLFormElement)return"form";const t=et(e.tagName);return cf.test(t)?"div":t}function lf(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let je,Hs;const df=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ff=/^(?:[a-z+]+:)?\/\//i,hf=/^www\..*/i,pf=/^(data:)([^,]*),(.*)/i;function en(e,t){return(e||"").replace(df,(n,r,s,i,o,a)=>{const c=s||o||a,u=r||i||"";if(!c)return n;if(ff.test(c)||hf.test(c))return`url(${u}${c}${u})`;if(pf.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${lf(t)+c}${u})`;const l=t.split("/"),d=c.split("/");l.pop();for(const f of d)f!=="."&&(f===".."?l.pop():l.push(f));return`url(${u}${l.join("/")}${u})`})}const mf=/^[^ \t\n\r\u000c]+/,_f=/^[, \t\n\r\u000c]+/;function gf(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const a=i.exec(t.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(_f),!(n>=t.length);){let i=r(mf);if(i.slice(-1)===",")i=Ge(e,i.substring(0,i.length-1)),s.push(i);else{let o="";i=Ge(e,i);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}function Ge(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function yf(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Fr(){const e=document.createElement("a");return e.href="",e.href}function go(e,t,n,r,s,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Ge(e,r):n==="srcset"?gf(e,r):n==="style"?en(r,Fr()):t==="object"&&n==="data"?Ge(e,r):typeof i=="function"?i(n,r,s):r)}function yo(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Ef(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const i=e.classList[s];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function Sf(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Le(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Le(e.parentNode,t,n,r+1)}function We(e,t){return n=>{const r=n;if(r===null)return!1;if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Sf(r,e))return!0}return!!(t&&r.matches(t))}}function tt(e,t,n,r,s,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;let a=-1,c=-1;if(i){if(c=Le(o,We(r,s)),c<0)return!0;a=Le(o,We(t,n),c>=0?c:1/0)}else{if(a=Le(o,We(t,n)),a<0)return!1;c=Le(o,We(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function bf(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=setTimeout(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{clearTimeout(a),s=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function wf(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const i=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(i),r=!0,t()})}function vf(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:_,maskInputFn:g,dataURLOptions:b={},inlineImages:w,recordCanvas:k,keepIframeSrcFn:D,newlyAddedElement:G=!1}=t,v=Tf(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:K.Document,childNodes:[],compatMode:e.compatMode}:{type:K.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:K.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:v};case e.ELEMENT_NODE:return kf(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:b,inlineImages:w,recordCanvas:k,keepIframeSrcFn:D,newlyAddedElement:G,rootId:v,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f});case e.TEXT_NODE:return Rf(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:_,maskInputOptions:h,maskInputFn:g,rootId:v});case e.CDATA_SECTION_NODE:return{type:K.CDATA,textContent:"",rootId:v};case e.COMMENT_NODE:return{type:K.Comment,textContent:e.textContent||"",rootId:v};default:return!1}}function Tf(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function Rf(e,t){var n;const{maskAllText:r,maskTextClass:s,unmaskTextClass:i,maskTextSelector:o,unmaskTextSelector:a,maskTextFn:c,maskInputOptions:u,maskInputFn:l,rootId:d}=t,f=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h=f==="STYLE"?!0:void 0,_=f==="SCRIPT"?!0:void 0,g=f==="TEXTAREA"?!0:void 0;if(h&&p){try{e.nextSibling||e.previousSibling||!((n=e.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(p=Qt(e.parentNode.sheet))}catch(w){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${w}`,e)}p=en(p,Fr())}_&&(p="SCRIPT_PLACEHOLDER");const b=tt(e,s,o,i,a,r);if(!h&&!_&&!g&&p&&b&&(p=c?c(p):p.replace(/[\S]/g,"*")),g&&p&&(u.textarea||b)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*")),f==="OPTION"&&p){const w=Rn({type:null,tagName:f,maskInputOptions:u});p=vt({isMasked:tt(e,s,o,i,a,w),element:e,value:p,maskInputFn:l})}return{type:K.Text,textContent:p||"",isStyle:h,rootId:d}}function kf(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:_,maskAllText:g,maskTextClass:b,unmaskTextClass:w,maskTextSelector:k,unmaskTextSelector:D}=t,G=Ef(e,r,s,i),v=uf(e);let E={};const N=e.attributes.length;for(let S=0;S<N;S++){const T=e.attributes[S];yo(v,T.name,T.value)||(E[T.name]=go(n,v,et(T.name),T.value,e,c))}if(v==="link"&&o){const S=Array.from(n.styleSheets).find(U=>U.href===e.href);let T=null;S&&(T=Qt(S)),T&&(delete E.rel,delete E.href,E._cssText=en(T,S.href))}if(v==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const S=Qt(e.sheet);S&&(E._cssText=en(S,Fr()))}if(v==="input"||v==="textarea"||v==="select"||v==="option"){const S=e,T=Pr(S),U=Zt(S,ur(v),T),Y=S.checked;if(T!=="submit"&&T!=="button"&&U){const W=tt(S,b,k,w,D,Rn({type:T,tagName:ur(v),maskInputOptions:a}));E.value=vt({isMasked:W,element:S,value:U,maskInputFn:u})}Y&&(E.checked=Y)}if(v==="option"&&(e.selected&&!a.select?E.selected=!0:delete E.selected),v==="canvas"&&f){if(e.__context==="2d")of(e)||(E.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const S=e.toDataURL(l.type,l.quality),T=document.createElement("canvas");T.width=e.width,T.height=e.height;const U=T.toDataURL(l.type,l.quality);S!==U&&(E.rr_dataURL=S)}}if(v==="img"&&d){je||(je=n.createElement("canvas"),Hs=je.getContext("2d"));const S=e,T=S.crossOrigin;S.crossOrigin="anonymous";const U=()=>{S.removeEventListener("load",U);try{je.width=S.naturalWidth,je.height=S.naturalHeight,Hs.drawImage(S,0,0),E.rr_dataURL=je.toDataURL(l.type,l.quality)}catch(Y){console.warn(`Cannot inline img src=${S.currentSrc}! Error: ${Y}`)}T?E.crossOrigin=T:S.removeAttribute("crossorigin")};S.complete&&S.naturalWidth!==0?U():S.addEventListener("load",U)}if((v==="audio"||v==="video")&&(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop)),G){const{width:S,height:T}=e.getBoundingClientRect();E={class:E.class,rr_width:`${S}px`,rr_height:`${T}px`}}v==="iframe"&&!p(E.src)&&(e.contentDocument||(E.rr_src=E.src),delete E.src);let F;try{customElements.get(v)&&(F=!0)}catch{}return{type:K.Element,tagName:v,attributes:E,childNodes:[],isSVG:yf(e)||void 0,needBlock:G,rootId:_,isCustom:F}}function L(e){return e==null?"":e.toLowerCase()}function If(e,t){if(t.comment&&e.type===K.Comment)return!0;if(e.type===K.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(L(e.attributes.name).match(/^msapplication-tile(image|color)$/)||L(e.attributes.name)==="application-name"||L(e.attributes.rel)==="icon"||L(e.attributes.rel)==="apple-touch-icon"||L(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&L(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(L(e.attributes.property).match(/^(og|twitter|fb):/)||L(e.attributes.name).match(/^(og|twitter):/)||L(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(L(e.attributes.name)==="robots"||L(e.attributes.name)==="googlebot"||L(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(L(e.attributes.name)==="author"||L(e.attributes.name)==="generator"||L(e.attributes.name)==="framework"||L(e.attributes.name)==="publisher"||L(e.attributes.name)==="progid"||L(e.attributes.property).match(/^article:/)||L(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(L(e.attributes.name)==="google-site-verification"||L(e.attributes.name)==="yandex-verification"||L(e.attributes.name)==="csrf-token"||L(e.attributes.name)==="p:domain_verify"||L(e.attributes.name)==="verify-v1"||L(e.attributes.name)==="verification"||L(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ye(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:_,maskTextFn:g,maskInputFn:b,slimDOMOptions:w,dataURLOptions:k={},inlineImages:D=!1,recordCanvas:G=!1,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N=5e3,onStylesheetLoad:F,stylesheetLoadTimeout:S=5e3,keepIframeSrcFn:T=()=>!1,newlyAddedElement:U=!1}=t;let{preserveWhiteSpace:Y=!0}=t;const W=vf(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:_,maskTextFn:g,maskInputFn:b,dataURLOptions:k,inlineImages:D,recordCanvas:G,keepIframeSrcFn:T,newlyAddedElement:U});if(!W)return console.warn(e,"not serialized"),null;let se;r.hasNode(e)?se=r.getId(e):If(W,w)||!Y&&W.type===K.Text&&!W.isStyle&&!W.textContent.replace(/^\s+|\s+$/gm,"").length?se=Tt:se=Ur();const P=Object.assign(W,{id:se});if(r.add(e,P),se===Tt)return null;v&&v(e);let de=!f;if(P.type===K.Element){de=de&&!P.needBlock,delete P.needBlock;const j=e.shadowRoot;j&&gt(j)&&(P.isShadowHost=!0)}if((P.type===K.Document||P.type===K.Element)&&de){w.headWhitespace&&P.type===K.Element&&P.tagName==="head"&&(Y=!1);const j={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:_,maskTextFn:g,maskInputFn:b,slimDOMOptions:w,dataURLOptions:k,inlineImages:D,recordCanvas:G,preserveWhiteSpace:Y,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N,onStylesheetLoad:F,stylesheetLoadTimeout:S,keepIframeSrcFn:T};for(const re of Array.from(e.childNodes)){const oe=Ye(re,j);oe&&P.childNodes.push(oe)}if(Qd(e)&&e.shadowRoot)for(const re of Array.from(e.shadowRoot.childNodes)){const oe=Ye(re,j);oe&&(gt(e.shadowRoot)&&(oe.isShadow=!0),P.childNodes.push(oe))}}return e.parentNode&&_t(e.parentNode)&&gt(e.parentNode)&&(P.isShadow=!0),P.type===K.Element&&P.tagName==="iframe"&&bf(e,()=>{const j=e.contentDocument;if(j&&E){const re=Ye(j,{doc:j,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:_,maskTextFn:g,maskInputFn:b,slimDOMOptions:w,dataURLOptions:k,inlineImages:D,recordCanvas:G,preserveWhiteSpace:Y,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N,onStylesheetLoad:F,stylesheetLoadTimeout:S,keepIframeSrcFn:T});re&&E(e,re)}},N),P.type===K.Element&&P.tagName==="link"&&P.attributes.rel==="stylesheet"&&wf(e,()=>{if(F){const j=Ye(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:_,maskTextFn:g,maskInputFn:b,slimDOMOptions:w,dataURLOptions:k,inlineImages:D,recordCanvas:G,preserveWhiteSpace:Y,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N,onStylesheetLoad:F,stylesheetLoadTimeout:S,keepIframeSrcFn:T});j&&F(e,j)}},S),P}function xf(e,t){const{mirror:n=new _o,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:_,maskTextFn:g,maskInputFn:b,slimDOM:w=!1,dataURLOptions:k,preserveWhiteSpace:D,onSerialize:G,onIframeLoad:v,iframeLoadTimeout:E,onStylesheetLoad:N,stylesheetLoadTimeout:F,keepIframeSrcFn:S=()=>!1}=t||{};return Ye(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:_,maskTextFn:g,maskInputFn:b,slimDOMOptions:w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:w==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:w===!1?{}:w,dataURLOptions:k,inlineImages:f,recordCanvas:p,preserveWhiteSpace:D,onSerialize:G,onIframeLoad:v,iframeLoadTimeout:E,onStylesheetLoad:N,stylesheetLoadTimeout:F,keepIframeSrcFn:S,newlyAddedElement:!1})}function ne(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const ze=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let $s={map:{},getId(){return console.error(ze),-1},getNode(){return console.error(ze),null},removeNodeFromMap(){console.error(ze)},has(){return console.error(ze),!1},reset(){console.error(ze)}};typeof window<"u"&&window.Proxy&&window.Reflect&&($s=new Proxy($s,{get(e,t,n){return t==="map"&&console.error(ze),Reflect.get(e,t,n)}}));function Rt(e,t,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=t-(o-s),c=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),s=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Eo(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){setTimeout(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Eo(e,t,i||{},!0)}function Hr(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let tn=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(tn=()=>new Date().getTime());function So(e){var t,n,r,s,i,o;const a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(a==null?void 0:a.documentElement.scrollLeft)||((n=(t=a==null?void 0:a.body)===null||t===void 0?void 0:t.parentElement)===null||n===void 0?void 0:n.scrollLeft)||((r=a==null?void 0:a.body)===null||r===void 0?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(a==null?void 0:a.documentElement.scrollTop)||((i=(s=a==null?void 0:a.body)===null||s===void 0?void 0:s.parentElement)===null||i===void 0?void 0:i.scrollTop)||((o=a==null?void 0:a.body)===null||o===void 0?void 0:o.scrollTop)||0}}function bo(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function wo(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ue(e,t,n,r,s){if(!e)return!1;const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!i)return!1;const o=We(t,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=Le(i,o);let c=-1;return a<0?!1:(r&&(c=Le(i,We(null,r))),a>-1&&c<0?!0:a<c)}function Of(e,t){return t.getId(e)!==-1}function Hn(e,t){return t.getId(e)===Tt}function vo(e,t){if(_t(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?vo(e.parentNode,t):!0:!0}function lr(e){return!!e.changedTouches}function Cf(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function To(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Ro(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function dr(e){return!!(e!=null&&e.shadowRoot)}class Nf{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!==null&&n!==void 0?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ko(e){var t,n;let r=null;return((n=(t=e.getRootNode)===null||t===void 0?void 0:t.call(e))===null||n===void 0?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function Df(e){let t=e,n;for(;n=ko(t);)t=n;return t}function Mf(e){const t=e.ownerDocument;if(!t)return!1;const n=Df(e);return t.contains(n)}function Io(e){const t=e.ownerDocument;return t?t.contains(e)||Mf(e):!1}var I=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(I||{}),R=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(R||{}),ee=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ee||{}),ge=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ge||{});function js(e){return"__ln"in e}class Af{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&js(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&js(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const zs=(e,t)=>`${e}@${t}`;class Lf{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new Af,s=c=>{let u=c,l=Tt;for(;l===Tt;)u=u&&u.nextSibling,l=u&&this.mirror.getId(u);return l},i=c=>{if(!c.parentNode||!Io(c))return;const u=_t(c.parentNode)?this.mirror.getId(ko(c)):this.mirror.getId(c.parentNode),l=s(c);if(u===-1||l===-1)return r.addNode(c);const d=Ye(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{To(f,this.mirror)&&this.iframeManager.addIframe(f),Ro(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),dr(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{this.iframeManager.attachIframe(f,p),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});d&&(t.push({parentId:u,nextId:l,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Gs(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Ws(this.droppedSet,c)&&!Gs(this.removes,c,this.mirror)||Ws(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),l=s(o.value);u!==-1&&l!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const l=u;if(u=u.previous,l){const d=this.mirror.getId(l.value.parentNode);if(s(l.value)===-1)continue;if(d!==-1){c=l;break}else{const p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=l;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const l=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);l.length<u.style.length&&(l+d).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(Hn(t.target,this.mirror))return;let n;try{n=document.implementation.createHTMLDocument()}catch{n=this.doc}switch(t.type){case"characterData":{const r=t.target.textContent;!ue(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:tt(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let s=t.attributeName,i=t.target.getAttribute(s);if(s==="value"){const a=Pr(r),c=r.tagName;i=Zt(r,c,a);const u=Rn({maskInputOptions:this.maskInputOptions,tagName:c,type:a}),l=tt(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,u);i=vt({isMasked:l,element:r,value:i,maskInputFn:this.maskInputFn})}if(ue(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===t.oldValue)return;let o=this.attributes.find(a=>a.node===t.target);if(r.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(i))if(!r.contentDocument)s="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),s==="type"&&r.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!yo(r.tagName,s)&&(o.attributes[s]=go(this.doc,et(r.tagName),et(s),i,r,this.maskAttributeFn),s==="style")){const a=n.createElement("span");t.oldValue&&a.setAttribute("style",t.oldValue);for(const c of Array.from(r.style)){const u=r.style.getPropertyValue(c),l=r.style.getPropertyPriority(c);u!==a.style.getPropertyValue(c)||l!==a.style.getPropertyPriority(c)?l===""?o.styleDiff[c]=u:o.styleDiff[c]=[u,l]:o._unchangedStyles[c]=[u,l]}for(const c of Array.from(a.style))r.style.getPropertyValue(c)===""&&(o.styleDiff[c]=!1)}break}case"childList":{if(ue(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const s=this.mirror.getId(r),i=_t(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);ue(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Hn(r,this.mirror)||!Of(r,this.mirror)||(this.addedSet.has(r)?(fr(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&s===-1||vo(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[zs(s,i)]?fr(this.movedSet,r):this.removes.push({parentId:i,id:s,isShadow:_t(t.target)&&gt(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Hn(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[zs(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);ue(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),dr(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function fr(e,t){e.delete(t),t.childNodes.forEach(n=>fr(e,n))}function Gs(e,t,n){return e.length===0?!1:xo(e,t,n)}function xo(e,t,n){const{parentNode:r}=t;if(!r)return!1;const s=n.getId(r);return e.some(i=>i.id===s)?!0:xo(e,r,n)}function Ws(e,t){return e.size===0?!1:Oo(e,t)}function Oo(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Oo(e,n):!1}let yt;function Bf(e){yt=e}function Pf(){yt=void 0}const C=e=>yt?(...n)=>{try{return e(...n)}catch(r){if(yt&&yt(r)===!0)return()=>{};throw r}}:e,qe=[];function Nt(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Co(e,t){var n,r;const s=new Lf;qe.push(s),s.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const o=(r=(n=window==null?void 0:window.Zone)===null||n===void 0?void 0:n.__symbol__)===null||r===void 0?void 0:r.call(n,"MutationObserver");o&&window[o]&&(i=window[o]);const a=new i(C(c=>{e.onMutation&&e.onMutation(c)===!1||s.processMutations.bind(s)(c)}));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Uf({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],a;const c=Rt(C(d=>{const f=Date.now()-a;e(o.map(p=>(p.timeOffset-=f,p)),d),o=[],a=null}),i),u=C(Rt(C(d=>{const f=Nt(d),{clientX:p,clientY:h}=lr(d)?d.changedTouches[0]:d;a||(a=tn()),o.push({x:p,y:h,id:r.getId(f),timeOffset:tn()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?R.Drag:d instanceof MouseEvent?R.MouseMove:R.TouchMove)}),s,{trailing:!1})),l=[ne("mousemove",u,n),ne("touchmove",u,n),ne("drag",u,n)];return C(()=>{l.forEach(d=>d())})}function Ff({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const l=d=>f=>{const p=Nt(f);if(ue(p,r,s,i,!0))return;let h=null,_=d;if("pointerType"in f){switch(f.pointerType){case"mouse":h=ge.Mouse;break;case"touch":h=ge.Touch;break;case"pen":h=ge.Pen;break}h===ge.Touch?ee[d]===ee.MouseDown?_="TouchStart":ee[d]===ee.MouseUp&&(_="TouchEnd"):ge.Pen}else lr(f)&&(h=ge.Touch);h!==null?(u=h,(_.startsWith("Touch")&&h===ge.Touch||_.startsWith("Mouse")&&h===ge.Mouse)&&(h=null)):ee[d]===ee.Click&&(h=u,u=null);const g=lr(f)?f.changedTouches[0]:f;if(!g)return;const b=n.getId(p),{clientX:w,clientY:k}=g;C(e)(Object.assign({type:ee[_],id:b,x:w,y:k},h!==null&&{pointerType:h}))};return Object.keys(ee).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let f=et(d);const p=l(d);if(window.PointerEvent)switch(ee[d]){case ee.MouseDown:case ee.MouseUp:f=f.replace("mouse","pointer");break;case ee.TouchStart:case ee.TouchEnd:return}c.push(ne(f,p,t))}),C(()=>{c.forEach(d=>d())})}function No({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=C(Rt(C(c=>{const u=Nt(c);if(!u||ue(u,r,s,i,!0))return;const l=n.getId(u);if(u===t&&t.defaultView){const d=So(t.defaultView);e({id:l,x:d.left,y:d.top})}else e({id:l,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return ne("scroll",a,t)}function Hf({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=C(Rt(C(()=>{const i=bo(),o=wo();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return ne("resize",s,t)}const $f=["INPUT","TEXTAREA","SELECT"],Ys=new WeakMap;function jf({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:_}){function g(E){let N=Nt(E);const F=E.isTrusted,S=N&&ur(N.tagName);if(S==="OPTION"&&(N=N.parentElement),!N||!S||$f.indexOf(S)<0||ue(N,r,s,i,!0))return;const T=N;if(T.classList.contains(o)||a&&T.matches(a))return;const U=Pr(N);let Y=Zt(T,S,U),W=!1;const se=Rn({maskInputOptions:c,tagName:S,type:U}),P=tt(N,f,h,p,_,se);(U==="radio"||U==="checkbox")&&(W=N.checked),Y=vt({isMasked:P,element:N,value:Y,maskInputFn:u}),b(N,d?{text:Y,isChecked:W,userTriggered:F}:{text:Y,isChecked:W});const de=N.name;U==="radio"&&de&&W&&t.querySelectorAll(`input[type="radio"][name="${de}"]`).forEach(j=>{if(j!==N){const re=vt({isMasked:P,element:j,value:Zt(j,S,U),maskInputFn:u});b(j,d?{text:re,isChecked:!W,userTriggered:!1}:{text:re,isChecked:!W})}})}function b(E,N){const F=Ys.get(E);if(!F||F.text!==N.text||F.isChecked!==N.isChecked){Ys.set(E,N);const S=n.getId(E);C(e)(Object.assign(Object.assign({},N),{id:S}))}}const k=(l.input==="last"?["change"]:["input","change"]).map(E=>ne(E,C(g),t)),D=t.defaultView;if(!D)return()=>{k.forEach(E=>E())};const G=D.Object.getOwnPropertyDescriptor(D.HTMLInputElement.prototype,"value"),v=[[D.HTMLInputElement.prototype,"value"],[D.HTMLInputElement.prototype,"checked"],[D.HTMLSelectElement.prototype,"value"],[D.HTMLTextAreaElement.prototype,"value"],[D.HTMLSelectElement.prototype,"selectedIndex"],[D.HTMLOptionElement.prototype,"selected"]];return G&&G.set&&k.push(...v.map(E=>Eo(E[0],E[1],{set(){C(g)({target:this,isTrusted:!1})}},!1,D))),C(()=>{k.forEach(E=>E())})}function nn(e){const t=[];function n(r,s){if($t("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||$t("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||$t("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||$t("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(e,t)}function ke(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function zf({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:C((l,d,f)=>{const[p,h]=f,{id:_,styleId:g}=ke(d,t,n.styleMirror);return(_&&_!==-1||g&&g!==-1)&&e({id:_,styleId:g,adds:[{rule:p,index:h}]}),l.apply(d,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:C((l,d,f)=>{const[p]=f,{id:h,styleId:_}=ke(d,t,n.styleMirror);return(h&&h!==-1||_&&_!==-1)&&e({id:h,styleId:_,removes:[{index:p}]}),l.apply(d,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:C((l,d,f)=>{const[p]=f,{id:h,styleId:_}=ke(d,t,n.styleMirror);return(h&&h!==-1||_&&_!==-1)&&e({id:h,styleId:_,replace:p}),l.apply(d,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:C((l,d,f)=>{const[p]=f,{id:h,styleId:_}=ke(d,t,n.styleMirror);return(h&&h!==-1||_&&_!==-1)&&e({id:h,styleId:_,replaceSync:p}),l.apply(d,f)})}));const c={};jt("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(jt("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),jt("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),jt("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([l,d])=>{u[l]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[l].insertRule,{apply:C((f,p,h)=>{const[_,g]=h,{id:b,styleId:w}=ke(p.parentStyleSheet,t,n.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,adds:[{rule:_,index:[...nn(p),g||0]}]}),f.apply(p,h)})}),d.prototype.deleteRule=new Proxy(u[l].deleteRule,{apply:C((f,p,h)=>{const[_]=h,{id:g,styleId:b}=ke(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||b&&b!==-1)&&e({id:g,styleId:b,removes:[{index:[...nn(p),_]}]}),f.apply(p,h)})})}),C(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([l,d])=>{d.prototype.insertRule=u[l].insertRule,d.prototype.deleteRule=u[l].deleteRule})})}function Do({mirror:e,stylesheetManager:t},n){var r,s,i;let o=null;n.nodeName==="#document"?o=e.getId(n):o=e.getId(n.host);const a=n.nodeName==="#document"?(r=n.defaultView)===null||r===void 0?void 0:r.Document:(i=(s=n.ownerDocument)===null||s===void 0?void 0:s.defaultView)===null||i===void 0?void 0:i.ShadowRoot,c=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets"):void 0;return o===null||o===-1||!a||!c?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var u;return(u=c.get)===null||u===void 0?void 0:u.call(this)},set(u){var l;const d=(l=c.set)===null||l===void 0?void 0:l.call(this,u);if(o!==null&&o!==-1)try{t.adoptStyleSheets(u,o)}catch{}return d}}),C(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))}function Gf({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:C((a,c,u)=>{var l;const[d,f,p]=u;if(n.has(d))return i.apply(c,[d,f,p]);const{id:h,styleId:_}=ke((l=c.parentRule)===null||l===void 0?void 0:l.parentStyleSheet,t,r.styleMirror);return(h&&h!==-1||_&&_!==-1)&&e({id:h,styleId:_,set:{property:d,value:f,priority:p},index:nn(c.parentRule)}),a.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:C((a,c,u)=>{var l;const[d]=u;if(n.has(d))return o.apply(c,[d]);const{id:f,styleId:p}=ke((l=c.parentRule)===null||l===void 0?void 0:l.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||p&&p!==-1)&&e({id:f,styleId:p,remove:{property:d},index:nn(c.parentRule)}),a.apply(c,u)})}),C(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function Wf({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=C(u=>Rt(C(l=>{const d=Nt(l);if(!d||ue(d,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:_}=d;e({type:u,id:s.getId(d),currentTime:f,volume:p,muted:h,playbackRate:_})}),i.media||500)),c=[ne("play",a(0),o),ne("pause",a(1),o),ne("seeked",a(2),o),ne("volumechange",a(3),o),ne("ratechange",a(4),o)];return C(()=>{c.forEach(u=>u())})}function Yf({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,l){const d=new i(c,u,l);return s.set(d,{family:c,buffer:typeof u!="string",descriptors:l,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};const o=Hr(t.fonts,"add",function(a){return function(c){return setTimeout(C(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),C(()=>{r.forEach(a=>a())})}function qf(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=C(()=>{const u=t.getSelection();if(!u||a&&(u!=null&&u.isCollapsed))return;a=u.isCollapsed||!1;const l=[],d=u.rangeCount||0;for(let f=0;f<d;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:_,endContainer:g,endOffset:b}=p;ue(h,r,s,i,!0)||ue(g,r,s,i,!0)||l.push({start:n.getId(h),startOffset:_,end:n.getId(g),endOffset:b})}o({ranges:l})});return c(),ne("selectionchange",c)}function Vf({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Hr(n.customElements,"define",function(s){return function(i,o,a){try{t({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function Kf(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Co(e,e.doc),s=Uf(e),i=Ff(e),o=No(e),a=Hf(e,{win:n}),c=jf(e),u=Wf(e),l=zf(e,{win:n}),d=Do(e,e.doc),f=Gf(e,{win:n}),p=e.collectFonts?Yf(e):()=>{},h=qf(e),_=Vf(e);return C(()=>{qe.forEach(g=>g.reset()),r.disconnect(),s(),i(),o(),a(),c(),u(),l(),d(),f(),p(),h(),_()})}function $t(e){return typeof window[e]<"u"}function jt(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class hr{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const i=r||this.getIdToRemoteIdMap(t),o=s||this.getRemoteIdToIdMap(t);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Jf{constructor(){this.crossOriginIframeMirror=new hr(Ur),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Xf{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new hr(Ur),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new hr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var r;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(r=this.loadListener)===null||r===void 0||r.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){var r;switch(n.type){case I.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const s=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,s),this.patchRootIdOnNode(n.data.node,s),{timestamp:n.timestamp,type:I.IncrementalSnapshot,data:{source:R.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case I.Meta:case I.Load:case I.DomContentLoaded:return!1;case I.Plugin:return n;case I.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case I.IncrementalSnapshot:switch(n.data.source){case R.Mutation:return n.data.adds.forEach(s=>{this.replaceIds(s,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,t);const i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(s.node,i)}),n.data.removes.forEach(s=>{this.replaceIds(s,t,["parentId","id"])}),n.data.attributes.forEach(s=>{this.replaceIds(s,t,["id"])}),n.data.texts.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case R.Drag:case R.TouchMove:case R.MouseMove:return n.data.positions.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case R.ViewportResize:return!1;case R.MediaInteraction:case R.MouseInteraction:case R.Scroll:case R.CanvasMutation:case R.Input:return this.replaceIds(n.data,t,["id"]),n;case R.StyleSheetRule:case R.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case R.Font:return n;case R.Selection:return n.data.ranges.forEach(s=>{this.replaceIds(s,t,["start","end"])}),n;case R.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(r=n.data.styles)===null||r===void 0||r.forEach(s=>{this.replaceStyleIds(s,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==K.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Qf{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Zf{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!gt(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=Co(Object.assign(Object.assign({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(No(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Do({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Hr(t.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&Io(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class eh{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}}class th{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Nf,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:mo(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class nh{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function J(e){const t=e;return t.timestamp=tn(),t}let rn;const ye=sf();function Ne(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:_,maskInputOptions:g,slimDOMOptions:b,maskAttributeFn:w,maskInputFn:k,maskTextFn:D,packFn:G,sampling:v={},dataURLOptions:E={},mousemoveWait:N,recordCanvas:F=!1,recordCrossOriginIframes:S=!1,recordAfter:T=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:U=!1,collectFonts:Y=!1,inlineImages:W=!1,keepIframeSrcFn:se=()=>!1,ignoreCSSAttributes:P=new Set([]),errorHandler:de,onMutation:j,getCanvasManager:re}=e;Bf(de);const oe=S?window.parent===window:!0;let He=!1;if(!oe)try{window.parent.document&&(He=!1)}catch{He=!0}if(oe&&!t)throw new Error("emit function is required");N!==void 0&&v.mousemove===void 0&&(v.mousemove=N),ye.reset();const $e=_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},De=b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:b==="all",headMetaDescKeywords:b==="all"}:b||{};Cf();let ct,ut=0;const Yr=x=>(G&&!He&&(x=G(x)),x),V=(x,Te)=>{var H;if(!((H=qe[0])===null||H===void 0)&&H.isFrozen()&&x.type!==I.FullSnapshot&&!(x.type===I.IncrementalSnapshot&&x.data.source===R.Mutation)&&qe.forEach(Z=>Z.unfreeze()),oe)t==null||t(Yr(x),Te);else if(He){const Z={type:"rrweb",event:Yr(x),origin:window.location.origin,isCheckout:Te};window.parent.postMessage(Z,"*")}if(x.type===I.FullSnapshot)ct=x,ut=0;else if(x.type===I.IncrementalSnapshot){if(x.data.source===R.Mutation&&x.data.isAttachIframe)return;ut++;const Z=r&&ut>=r,$=n&&x.timestamp-ct.timestamp>n;(Z||$)&&Nn(!0)}},Dt=x=>{V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.Mutation},x)}))},qr=x=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.Scroll},x)})),sa=x=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.CanvasMutation},x)})),ia=x=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.AdoptedStyleSheet},x)})),Me=new th({mutationCb:Dt,adoptedStyleSheetCb:ia}),lt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Jf:new Xf({mirror:ye,mutationCb:Dt,stylesheetManager:Me,recordCrossOriginIframes:S,wrappedEmit:V}),Cn=new nh,Vr=re?re({recordCanvas:F,blockClass:s,blockSelector:i,unblockSelector:o,sampling:v.canvas,dataURLOptions:E}):new eh,Mt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Qf:new Zf({mutationCb:Dt,scrollCb:qr,bypassOptions:{onMutation:j,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:$e,dataURLOptions:E,maskAttributeFn:w,maskTextFn:D,maskInputFn:k,recordCanvas:F,inlineImages:W,sampling:v,slimDOMOptions:De,iframeManager:lt,stylesheetManager:Me,canvasManager:Vr,keepIframeSrcFn:se,processedNodeManager:Cn},mirror:ye}),Nn=(x=!1)=>{V(J({type:I.Meta,data:{href:window.location.href,width:wo(),height:bo()}}),x),Me.reset(),Mt.init(),qe.forEach(H=>H.lock());const Te=xf(document,{mirror:ye,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:$e,maskAttributeFn:w,maskInputFn:k,maskTextFn:D,slimDOM:De,dataURLOptions:E,recordCanvas:F,inlineImages:W,onSerialize:H=>{To(H,ye)&&lt.addIframe(H),Ro(H,ye)&&Me.trackLinkElement(H),dr(H)&&Mt.addShadowRoot(H.shadowRoot,document)},onIframeLoad:(H,Z)=>{lt.attachIframe(H,Z),Mt.observeAttachShadow(H)},onStylesheetLoad:(H,Z)=>{Me.attachLinkElement(H,Z)},keepIframeSrcFn:se});if(!Te)return console.warn("Failed to snapshot the document");V(J({type:I.FullSnapshot,data:{node:Te,initialOffset:So(window)}}),x),qe.forEach(H=>H.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Me.adoptStyleSheets(document.adoptedStyleSheets,ye.getId(document))};rn=Nn;try{const x=[],Te=Z=>C(Kf)({onMutation:j,mutationCb:Dt,mousemoveCb:($,oa)=>V(J({type:I.IncrementalSnapshot,data:{source:oa,positions:$}})),mouseInteractionCb:$=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.MouseInteraction},$)})),scrollCb:qr,viewportResizeCb:$=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.ViewportResize},$)})),inputCb:$=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.Input},$)})),mediaInteractionCb:$=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.MediaInteraction},$)})),styleSheetRuleCb:$=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.StyleSheetRule},$)})),styleDeclarationCb:$=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.StyleDeclaration},$)})),canvasMutationCb:sa,fontCb:$=>V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.Font},$)})),selectionCb:$=>{V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.Selection},$)}))},customElementCb:$=>{V(J({type:I.IncrementalSnapshot,data:Object.assign({source:R.CustomElement},$)}))},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:$e,inlineStylesheet:h,sampling:v,recordCanvas:F,inlineImages:W,userTriggeredOnInput:U,collectFonts:Y,doc:Z,maskAttributeFn:w,maskInputFn:k,maskTextFn:D,keepIframeSrcFn:se,blockSelector:i,unblockSelector:o,slimDOMOptions:De,dataURLOptions:E,mirror:ye,iframeManager:lt,stylesheetManager:Me,shadowDomManager:Mt,processedNodeManager:Cn,canvasManager:Vr,ignoreCSSAttributes:P,plugins:[]},{});lt.addLoadListener(Z=>{try{x.push(Te(Z.contentDocument))}catch($){console.warn($)}});const H=()=>{Nn(),x.push(Te(document))};return document.readyState==="interactive"||document.readyState==="complete"?H():(x.push(ne("DOMContentLoaded",()=>{V(J({type:I.DomContentLoaded,data:{}})),T==="DOMContentLoaded"&&H()})),x.push(ne("load",()=>{V(J({type:I.Load,data:{}})),T==="load"&&H()},window))),()=>{x.forEach(Z=>Z()),Cn.destroy(),rn=void 0,Pf()}}catch(x){console.warn(x)}}function rh(e){if(!rn)throw new Error("please take full snapshot after start recording");rn(e)}Ne.mirror=ye;Ne.takeFullSnapshot=rh;const sh=3,ih=5;function $r(e){return e>9999999999?e:e*1e3}function $n(e){return e>9999999999?e/1e3:e}function kn(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:I.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:fe(t,10,1e3)}}),t.category==="console")))}const oh="button,a";function Mo(e){return e.closest(oh)||e}function Ao(e){const t=Lo(e);return!t||!(t instanceof Element)?t:Mo(t)}function Lo(e){return ah(e)?e.target:e}function ah(e){return typeof e=="object"&&!!e&&"target"in e}let Ie;function ch(e){return Ie||(Ie=[],uh()),Ie.push(e),()=>{const t=Ie?Ie.indexOf(e):-1;t>-1&&Ie.splice(t,1)}}function uh(){Q(B,"open",function(e){return function(...t){if(Ie)try{Ie.forEach(n=>n())}catch{}return e.apply(B,t)}})}function lh(e,t,n){e.handleClick(t,n)}class dh{constructor(t,n,r=kn){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=ch(()=>{this._lastMutation=qs()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(hh(n,this._ignoreSelector)||!ph(t))return;const r={timestamp:$n(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=$n(t)}registerScroll(t=Date.now()){this._lastScroll=$n(t)}registerClick(t){const n=Mo(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=qs();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:B.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,l);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:B.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const fh=["A","BUTTON","INPUT"];function hh(e,t){return!!(!fh.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function ph(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function qs(){return Date.now()/1e3}function mh(e,t){try{if(!_h(t))return;const{source:n}=t.data;if(n===R.Mutation&&e.registerMutation(t.timestamp),n===R.Scroll&&e.registerScroll(t.timestamp),gh(t)){const{type:r,id:s}=t.data,i=Ne.mirror.getNode(s);i instanceof HTMLElement&&r===ee.Click&&e.registerClick(i)}}catch{}}function _h(e){return e.type===sh}function gh(e){return e.data.source===R.MouseInteraction}function Se(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var sn;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(sn||(sn={}));const yh=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled"]);function Eh(e){const t={};for(const n in e)if(yh.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const Sh=e=>t=>{if(!e.isEnabled())return;const n=bh(t);if(!n)return;const r=t.name==="click",s=r&&t.event;r&&e.clickDetector&&s&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&lh(e.clickDetector,n,Ao(t.event)),kn(e,n)};function Bo(e,t){const n=Ne.mirror.getId(e),r=n&&Ne.mirror.getNode(n),s=r&&Ne.mirror.getMeta(r),i=s&&vh(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===sn.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:Eh(i.attributes)}}:{}}}function bh(e){const{target:t,message:n}=wh(e);return Se({category:`ui.${e.name}`,...Bo(t,n)})}function wh(e){const t=e.name==="click";let n,r=null;try{r=t?Ao(e.event):Lo(e.event),n=St(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function vh(e){return e.type===sn.Element}function Th(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=Rh(t);n&&kn(e,n)}function Rh(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=e;if(!o||kh(o)||!i)return null;const a=t||r||s,c=i.length===1;if(!a&&c)return null;const u=St(o,{maxStringLength:200})||"<unknown>",l=Bo(o,u);return Se({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function kh(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const Vs={resource:Nh,paint:Oh,navigation:Ch};function Ih(e){return e.map(xh).filter(Boolean)}function xh(e){return Vs[e.entryType]?Vs[e.entryType](e):null}function nt(e){return((wu||B.performance.timeOrigin)+e)/1e3}function Oh(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=nt(s);return{type:n,name:r,start:i,end:i+t,data:void 0}}function Ch(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:f,startTime:p,transferSize:h,type:_}=e;return s===0?null:{type:`${t}.${_}`,start:nt(p),end:nt(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:f}}}function Nh(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:nt(i),end:nt(s),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function Dh(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,s=e.value,i=nt(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:s,size:s,nodeId:r?Ne.mirror.getId(r):void 0}}}function Mh(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Bd(s,n))}),r.push(Ld(({metric:s})=>{e.replayPerformanceEntries.push(Dh(s))})),()=>{r.forEach(s=>s())}}const Ah='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Lh(){const e=new Blob([Ah]);return URL.createObjectURL(e)}function te(e,t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(y.info(e),t&&Po(e))}function Ke(e,t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(y.info(e),t&&setTimeout(()=>{Po(e)},0))}function Po(e){M().addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class jr extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Br}.`)}}class Uo{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Br)throw new jr;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?$r(t):null}}class Bh{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){te("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("[Replay]",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class Ph{constructor(t){this._worker=new Bh(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=$r(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Br?Promise.reject(new jr):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear")}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class Uh{constructor(t){this._fallback=new Uo,this._compression=new Ph(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{te("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n}=this._fallback,r=[];for(const s of t)r.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("[Replay] Failed to add events when switching buffers.",s)}}}function Fh({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=Hh(t);if(n)return n}return te("[Replay] Using simple buffer"),new Uo}function Hh(e){try{const t=e||$h();if(!t)return;te(`[Replay] Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new Uh(n)}catch{te("[Replay] Failed to create compression worker")}}function $h(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?Lh():""}function zr(){try{return"sessionStorage"in B&&!!B.sessionStorage}catch{return!1}}function jh(e){zh(),e.session=void 0}function zh(){if(zr())try{B.sessionStorage.removeItem(Ar)}catch{}}function Fo(e){return e===void 0?!1:Math.random()<e}function Gr(e){if(zr())try{B.sessionStorage.setItem(Ar,JSON.stringify(e))}catch{}}function Ho(e){const t=Date.now(),n=e.id||me(),r=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a}}function Gh(e,t){return Fo(e)?"session":t?"buffer":!1}function Ks({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=Gh(e,t),i=Ho({sampled:s,previousSessionId:r});return n&&Gr(i),i}function Wh(e){if(!zr())return null;try{const t=B.sessionStorage.getItem(Ar);if(!t)return null;const n=JSON.parse(t);return Ke("[Replay] Loading existing session",e),Ho(n)}catch{return null}}function pr(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function $o(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return pr(e.started,t,r)||pr(e.lastActivity,n,r)}function jo(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!$o(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function jn({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},s){const i=s.stickySession&&Wh(e);return i?jo(i,{sessionIdleExpire:t,maxReplayDuration:n})?(Ke("[Replay] Session in sessionStorage is expired, creating new one..."),Ks(s,{previousSessionId:i.id})):i:(Ke("[Replay] Creating new session",e),Ks(s,{previousSessionId:r}))}function Yh(e){return e.type===I.Custom}function Wr(e,t,n){return Go(e,t)?(zo(e,t,n),!0):!1}function qh(e,t,n){return Go(e,t)?zo(e,t,n):Promise.resolve(null)}async function zo(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=e.getOptions(),s=Vh(t,r.beforeAddRecordingEvent);return s?await e.eventBuffer.addEvent(s):void 0}catch(r){const s=r&&r instanceof jr?"addEventSizeExceeded":"addEvent";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error(r),await e.stop({reason:s});const i=M().getClient();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function Go(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=$r(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(te(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1):!0}function Vh(e,t){try{if(typeof t=="function"&&Yh(e))return t(e)}catch(n){return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}function Wo(e){return!e.type}function mr(e){return e.type==="transaction"}function Kh(e){return e.type==="replay_event"}function Yo(e){const t=Qh();return(n,r)=>{if(!e.isEnabled()||!Wo(n)&&!mr(n))return;const s=r&&r.statusCode;if(!(t&&(!s||s<200||s>=300))){if(mr(n)){Jh(e,n);return}Xh(e,n)}}}function Jh(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function Xh(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||setTimeout(()=>{e.sendBufferedReplayOrFlush()})}function Qh(){const e=M().getClient();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}function Zh(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function ep(e,t){return e.recordingMode!=="buffer"||t.message===Lr||!t.exception||t.type?!1:Fo(e.getOptions().errorSampleRate)}function tp(e,t=!1){const n=t?Yo(e):void 0;return Object.assign((r,s)=>e.isEnabled()?Kh(r)?(delete r.breadcrumbs,r):!Wo(r)&&!mr(r)||!e.checkAndHandleExpiredSession()?r:Zh(r,s)&&!e.getOptions()._experiments.captureExceptions?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.log("[Replay] Ignoring error from rrweb internals",r),null):((ep(e,r)||e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function In(e,t){return t.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=e.throttledAddEvent({type:I.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function np(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function rp(e){return t=>{if(!e.isEnabled())return;const n=np(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(In(e,[n]),!1)))}}function sp(e,t){return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&e.getOptions()._experiments.traceInternals?!1:bl(t,M())}function xn(e,t){e.isEnabled()&&t!==null&&(sp(e,t.name)||e.addUpdate(()=>(In(e,[t]),!0)))}function ip(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:s}=e;if(!n)return null;const{method:i,url:o}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:i,statusCode:s?s.status:void 0}}}function op(e){return t=>{if(!e.isEnabled())return;const n=ip(t);xn(e,n)}}function ap(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,s=r[Ae];if(!t||!n||!s)return null;const{method:i,url:o,status_code:a}=s;return o===void 0?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:i,statusCode:a}}}function cp(e){return t=>{if(!e.isEnabled())return;const n=ap(t);xn(e,n)}}function on(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Jo(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function qo(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Vo(e){if(typeof e=="string")return e;if(e instanceof URLSearchParams)return e.toString();if(e instanceof FormData)return Jo(e)}function Ko(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:it({method:i,statusCode:o,request:a,response:c})}}function kt(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Ce(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=up(n);return r.body=s,i&&i.length>0&&(r._meta={warnings:i}),r}function _r(e,t){return Object.keys(e).reduce((n,r)=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=e[r]),n},{})}function Jo(e){return new URLSearchParams(e).toString()}function up(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Ps,n=lp(e);if(t){const r=e.slice(0,Ps);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function lp(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function an(e,t){const n=dp(e);return Ot(n,t)}function dp(e,t=B.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(B.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function fp(e,t,n){try{const r=await pp(e,t,n),s=Ko("resource.fetch",r);xn(n.replay,s)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("[Replay] Failed to capture fetch breadcrumb",r)}}function hp(e,t,n){const{input:r,response:s}=t,i=Xo(r),o=on(i,n.textEncoder),a=s?qo(s.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),a!==void 0&&(e.data.response_body_size=a)}async function pp(e,t,n){const{startTimestamp:r,endTimestamp:s}=t,{url:i,method:o,status_code:a=0,request_body_size:c,response_body_size:u}=e.data,l=an(i,n.networkDetailAllowUrls)&&!an(i,n.networkDetailDenyUrls),d=l?mp(n,t.input,c):kt(c),f=await _p(l,n,t.response,u);return{startTimestamp:r,endTimestamp:s,url:i,method:o,statusCode:a,request:d,response:f}}function mp({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=yp(n,t);if(!e)return Ce(s,r,void 0);const i=Xo(n),o=Vo(i);return Ce(s,r,o)}async function _p(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},s,i){if(!e&&i!==void 0)return kt(i);const o=Qo(s.headers,r);if(!t&&i!==void 0)return Ce(o,i,void 0);try{const a=s.clone(),c=await gp(a),u=c&&c.length&&i===void 0?on(c,n):i;return e?t?Ce(o,u,c):Ce(o,u,void 0):kt(u)}catch{return Ce(o,i,void 0)}}async function gp(e){try{return await e.text()}catch{return}}function Xo(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Qo(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function yp(e,t){return e.length===1&&typeof e[0]!="string"?Js(e[0],t):e.length===2?Js(e[1],t):{}}function Js(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Qo(n,t):Array.isArray(n)?{}:_r(n,t):{}}async function Ep(e,t,n){try{const r=bp(e,t,n),s=Ko("resource.xhr",r);xn(n.replay,s)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("[Replay] Failed to capture xhr breadcrumb",r)}}function Sp(e,t,n){const{xhr:r,input:s}=t,i=on(s,n.textEncoder),o=r.getResponseHeader("content-length")?qo(r.getResponseHeader("content-length")):on(r.response,n.textEncoder);i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}function bp(e,t,n){const{startTimestamp:r,endTimestamp:s,input:i,xhr:o}=t,{url:a,method:c,status_code:u=0,request_body_size:l,response_body_size:d}=e.data;if(!a)return null;if(!an(a,n.networkDetailAllowUrls)||an(a,n.networkDetailDenyUrls)){const b=kt(l),w=kt(d);return{startTimestamp:r,endTimestamp:s,url:a,method:c,statusCode:u,request:b,response:w}}const f=o[Ae],p=f?_r(f.request_headers,n.networkRequestHeaders):{},h=_r(wp(o),n.networkResponseHeaders),_=Ce(p,l,n.networkCaptureBodies?Vo(i):void 0),g=Ce(h,d,n.networkCaptureBodies?t.xhr.responseText:void 0);return{startTimestamp:r,endTimestamp:s,url:a,method:c,statusCode:u,request:_,response:g}}function wp(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s.toLowerCase()]=i,n},{}):{}}function vp(e){const t=M().getClient();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",(u,l)=>Tp(c,u,l)):(ae("fetch",op(e)),ae("xhr",cp(e)))}catch{}}function Tp(e,t,n){if(t.data)try{Rp(t)&&Ip(n)&&(Sp(t,n,e),Ep(t,n,e)),kp(t)&&xp(n)&&(hp(t,n,e),fp(t,n,e))}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("Error when enriching network breadcrumb")}}function Rp(e){return e.category==="xhr"}function kp(e){return e.category==="fetch"}function Ip(e){return e&&e.xhr}function xp(e){return e&&e.response}let Xs=null;function Op(e){return!!e.category}const Cp=e=>t=>{if(!e.isEnabled())return;const n=Np(t);n&&kn(e,n)};function Np(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return Xs===t||!t||(Xs=t,!Op(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:t.category==="console"?Dp(t):Se(t)}function Dp(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return Se(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>Ht?(n=!0,`${s.slice(0,Ht)}…`):s;if(typeof s=="object")try{const i=fe(s,7);return JSON.stringify(i).length>Ht?(n=!0,`${JSON.stringify(i,null,2).slice(0,Ht)}…`):i}catch{}return s});return Se({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Mp(e){const t=M().getScope(),n=M().getClient();t.addScopeListener(Cp(e)),ae("dom",Sh(e)),ae("history",rp(e)),vp(e);const r=tp(e,!Qs(n));n&&n.addEventProcessor?n.addEventProcessor(r):zi(r),Qs(n)&&(n.on("afterSendEvent",Yo(e)),n.on("createDsc",s=>{const i=e.getSessionId();i&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=i)}),n.on("startTransaction",s=>{e.lastTransaction=s}),n.on("finishTransaction",s=>{e.lastTransaction=s}))}function Qs(e){return!!(e&&e.on)}async function Ap(e){try{return Promise.all(In(e,[Lp(B.performance.memory)]))}catch{return[]}}function Lp(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Bp(e,t,n){let r,s,i;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function u(){return s!==void 0||i!==void 0?a():r}function l(){return s&&clearTimeout(s),s=setTimeout(a,t),o&&i===void 0&&(i=setTimeout(a,o)),r}return l.cancel=c,l.flush=u,l}function Pp(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.warn("[Replay] Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&mh(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!Wr(e,n,s))return!0;if(!s)return!1;if(Fp(e,s),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&(te(`[Replay] Updating session start time to earliest event in buffer to ${new Date(i)}`,e.getOptions()._experiments.traceInternals),e.session.started=i,e.getOptions().stickySession&&Gr(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function Up(e){const t=e.getOptions();return{type:I.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Fp(e,t){!t||!e.session||e.session.segmentId!==0||Wr(e,Up(e),!1)}function Hp(e,t,n,r){return ot(Hi(e,Ir(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function $p({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function jp({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:s};e.emit&&e.emit("preprocessEvent",r,i);const o=await Vi(e.getOptions(),r,i,t,e);if(!o)return null;o.platform=o.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},o}async function zp({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=$p({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=M(),f=d.getClient(),p=d.getScope(),h=f&&f.getTransport(),_=f&&f.getDsn();if(!f||!h||!_||!i.sampled)return;const g={type:Hd,replay_start_timestamp:l/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},b=await jp({scope:p,client:f,replayId:t,event:g});if(!b){f.recordDroppedEvent("event_processor","replay",g),te("An event processor returned `null`, will not send event.");return}delete b.sdkProcessingMetadata;const w=Hp(b,o,_,f.getOptions().tunnel);let k;try{k=await h.send(w)}catch(G){const v=new Error(Lr);try{v.cause=G}catch{}throw v}if(!k)return k;if(typeof k.statusCode=="number"&&(k.statusCode<200||k.statusCode>=300))throw new Zo(k.statusCode);const D=ji({},k);if($i(D,"replay"))throw new ea(D);return k}class Zo extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class ea extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function ta(e,t={count:0,interval:Yd}){const{recordingData:n,options:r}=e;if(n.length)try{return await zp(e),!0}catch(s){if(s instanceof Zo||s instanceof ea)throw s;if(Hu("Replays",{_retryCount:t.count}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&r._experiments&&r._experiments.captureExceptions&&Cr(s),t.count>=qd){const i=new Error(`${Lr} - max retries exceeded`);try{i.cause=s}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{setTimeout(async()=>{try{await ta(e,t),i(!0)}catch(a){o(a)}},t.interval)})}}const na="__THROTTLED",Gp="__SKIPPED";function Wp(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,l)=>{l<c&&r.delete(l)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=t){const l=o;return o=!0,l?Gp:na}o=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class xe{constructor({options:t,recordingOptions:n}){xe.prototype.__init.call(this),xe.prototype.__init2.call(this),xe.prototype.__init3.call(this),xe.prototype.__init4.call(this),xe.prototype.__init5.call(this),xe.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:$d,sessionIdleExpire:jd},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Bp(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Wp((o,a)=>qh(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(Vd,r),timeout:r,scrollTimeout:Kd,ignoreSelector:s?s.join(","):""}:void 0;i&&(this.clickDetector=new dh(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(t),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Ke(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Ke("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const t=jn({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Ke("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=jn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{this._stopRecording=Ne({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:Wd},emit:Pp(this),onMutation:this._onMutationHandler})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{te(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,jh(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),te("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),te("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();te("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&pr(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${B.location.pathname}${B.location.hash}${B.location.search}`,n=`${B.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===na){const s=Se({category:"replay.throttled"});this.addUpdate(()=>!Wr(this,{type:ih,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastTransaction||M().getScope().getTransaction();if(!(!t||!["route","custom"].includes(t.metadata.source)))return t.name}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Fh({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("[Replay]",t),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&Cr(t)}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=jn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return jo(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{B.document.addEventListener("visibilitychange",this._handleVisibilityChange),B.addEventListener("blur",this._handleWindowBlur),B.addEventListener("focus",this._handleWindowFocus),B.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Mp(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=Mh(this)}_removeListeners(){try{B.document.removeEventListener("visibilitychange",this._handleVisibilityChange),B.removeEventListener("blur",this._handleWindowBlur),B.removeEventListener("focus",this._handleWindowFocus),B.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{B.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=Se({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=Se({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{Th(this,t)}}_doChangeToBackgroundTasks(t){!this.session||$o(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){te("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:I.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=Ih(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(In(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await Ap(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await ta({replayId:t,recordingData:i,segmentId:s,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=M().getClient();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){te(`[Replay] Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),i&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&te("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&y.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Gr(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>s||i){const o=Se({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(o)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function ft(e,t,n,r){const s=typeof r=="string"?r.split(","):[],i=[...e,...s,...t];return typeof n<"u"&&(typeof n=="string"&&i.push(`.${n}`),console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")),i.join(",")}function Yp({mask:e,unmask:t,block:n,unblock:r,ignore:s,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l=['base[href="/"]'],d=ft(e,[".sentry-mask","[data-sentry-mask]"],a,c),f=ft(t,[".sentry-unmask","[data-sentry-unmask]"]),p={maskTextSelector:d,unmaskTextSelector:f,blockSelector:ft(n,[".sentry-block","[data-sentry-block]",...l],i,o),unblockSelector:ft(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:ft(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return i instanceof RegExp&&(p.blockClass=i),a instanceof RegExp&&(p.maskTextClass=a),p}function qp({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Zs='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Vp=["content-length","content-type","accept"];let ei=!1;class On{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=zd,flushMaxDelay:n=Gd,minReplayDuration:r=Jd,maxReplayDuration:s=Us,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},sessionSampleRate:u,errorSampleRate:l,maskAllText:d=!0,maskAllInputs:f=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:_=1e4,slowClickTimeout:g=7e3,slowClickIgnoreSelectors:b=[],networkDetailAllowUrls:w=[],networkDetailDenyUrls:k=[],networkCaptureBodies:D=!0,networkRequestHeaders:G=[],networkResponseHeaders:v=[],mask:E=[],maskAttributes:N=["title","placeholder"],unmask:F=[],block:S=[],unblock:T=[],ignore:U=[],maskFn:Y,beforeAddRecordingEvent:W,beforeErrorSampling:se,blockClass:P,blockSelector:de,maskInputOptions:j,maskTextClass:re,maskTextSelector:oe,ignoreClass:He}={}){this.name=On.id;const $e=Yp({mask:E,unmask:F,block:S,unblock:T,ignore:U,blockClass:P,blockSelector:de,maskTextClass:re,maskTextSelector:oe,ignoreClass:He});if(this._recordingOptions={maskAllInputs:f,maskAllText:d,maskInputOptions:{...j||{},password:!0},maskTextFn:Y,maskInputFn:Y,maskAttributeFn:(De,ct,ut)=>qp({maskAttributes:N,maskAllText:d,privacyOptions:$e,key:De,value:ct,el:ut}),...$e,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:De=>{try{De.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Xd),maxReplayDuration:Math.min(s,Us),stickySession:i,sessionSampleRate:u,errorSampleRate:l,useCompression:o,workerUrl:a,blockAllMedia:p,maskAllInputs:f,maskAllText:d,mutationBreadcrumbLimit:h,mutationLimit:_,slowClickTimeout:g,slowClickIgnoreSelectors:b,networkDetailAllowUrls:w,networkDetailDenyUrls:k,networkCaptureBodies:D,networkRequestHeaders:ti(G),networkResponseHeaders:ti(v),beforeAddRecordingEvent:W,beforeErrorSampling:se,_experiments:c},typeof u=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${u} })`),this._initialOptions.sessionSampleRate=u),typeof l=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Zs}`:Zs),this._isInitialized&&Es())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return ei}set _isInitialized(t){ei=t}setupOnce(){Es()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const t=Kp(this._initialOptions);this._replay=new xe({options:t,recordingOptions:this._recordingOptions})}}On.__initStatic();function Kp(e){const t=M().getClient(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...it(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set."),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(console.warn("SDK client is not available."),r)}function ti(e){return[...Vp,...e.map(t=>t.toLowerCase())]}Rd({dsn:{}.VITE_SENTRY_DSN_PUBLIC,integrations:[new On({maskAllText:!0,blockAllMedia:!0})],replaysOnErrorSampleRate:1,tracesSampleRate:1})});export default Jp();
